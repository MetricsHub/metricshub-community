//
//
//                 C O N N E C T O R
//
//                       f o r
//
//                 Hardware Sentry
//
//                 by Sentry Software (c)
//
//                   MS_HW_IBMHMC.hdf
//
//      Supports: IBM AIX machines through the HMC (Hardware Management Console)
//		Monitors: System Attention LED as reported by the HMC or all systems exposed by the HMC
//      Connects to: HMC (in SSH)
//
//

//
// HEADER
//

hdf.DisplayName="IBM Hardware Management Console (HMC) Version 8 or later"
hdf.TypicalPlatform="IBM POWER"
hdf.ReliesOn="IBM Hardware Management Console (HMC)"
hdf.Comments="Reports hardware errors that occured during the day and provides the status of the System Attention LED of all IBM AIX servers connected to the Hardware Management Console. An ALARM alert is triggered for a hardware problem that happened during the day and is automatically cleared at midnight."
hdf.Version="1.0"
hdf.RemoteSupport="true"
hdf.LocalSupport="false"
hdf.AppliesToOS="Linux"

#include MS_HW_IBMHMC.hhdf

#define _EVENTFIELDS sys_name,status,text,refcode,event_time,fru_details


// check the version of the HMC
// We want 8 or 9, but also allow 10,11,12
Detection.Criteria(2).Type="OSCommand"
Detection.Criteria(2).CommandLine="lshmc -V"
Detection.Criteria(2).ExpectedResult="version.*Version.*[01289]"

Enclosure.Collect.Source(1).SelectColumns="1,2,3,4,5,6"

// Add Fru information for v8 systems
// v8 //  SystemName;Status;Description;RefCode;EventTime;FRUDetails;
Enclosure.Collect.Source(1).Compute(7).Type="RightConcat"
Enclosure.Collect.Source(1).Compute(7).Column=3
Enclosure.Collect.Source(1).Compute(7).String=" - FRU Details: "

Enclosure.Collect.Source(1).Compute(8).Type="RightConcat"
Enclosure.Collect.Source(1).Compute(8).Column=3
Enclosure.Collect.Source(1).Compute(8).String=Column(6)
