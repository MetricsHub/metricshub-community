//
//
//    H a r d w a r e   D e f i n i t i o n   F i l e
//
//                       f o r
//
//                 Hardware Sentry
//
//                 by Sentry Software (c)
//
//             MS_HW_SunInfinibandDCS.hdf
//
//         Supports: Oracle/Sun Infiniband DCS Switches ILOM (SNMP)
//
//


// HEADER

hdf.DisplayName="Oracle/Sun InfiniBand DCS Switch (Ports)"
hdf.TypicalPlatform="Oracle/Sun Infiniband DCS"
hdf.ReliesOn="Oracle/Sun ILOM SNMP Agent"
hdf.Version="1.0"
hdf.Comments="This connector provides hardware monitoring for Oracle/Sun InfiniBand DCS switches via SNMP"
hdf.RemoteSupport="true"
hdf.LocalSupport="false"
hdf.AppliesToOS="Storage,Network"


//
// DETECTION
//

// Need a DCS Ports OID
Detection.Criteria(1).Type="SNMP"
Detection.Criteria(1).SnmpGetNext="1.3.6.1.4.1.42.2.135.2.2.5.1.1"

// PortLinks (as NetworkCard devices)
//

//
// Discovery

// Source(1) = ibSmaPortInfoEntry SNMP Table
// PortID;WidthActive;PhysState;Speed;
NetworkCard.Discovery.Source(1).Type="SnmpTable"
NetworkCard.Discovery.Source(1).SnmpTableOid="1.3.6.1.4.1.42.2.135.2.2.5.1.1"
NetworkCard.Discovery.Source(1).SnmpTableSelectColumns="ID,5,7,10"


// Translate WidthActive
// PortID;WidthActive;PhysState;Speed;
NetworkCard.Discovery.Source(1).Compute(1).Type="Translate"
NetworkCard.Discovery.Source(1).Compute(1).Column=2
NetworkCard.Discovery.Source(1).Compute(1).TranslationTable="WidthActiveTranslationTable"

// PortTypeTranslationTable
WidthActiveTranslationTable(1)="IB Port 1x"
WidthActiveTranslationTable(2)="IB Port 4x"
WidthActiveTranslationTable(4)="IB Port 8x"
WidthActiveTranslationTable(8)="IB Port 12x"
WidthActiveTranslationTable(Default)=""

// Exclude disabled ports
// PortID;WidthActive;PhysState;Speed;
NetworkCard.Discovery.Source(1).Compute(2).Type="ExcludeMatchingLines"
NetworkCard.Discovery.Source(1).Compute(2).Column=3
NetworkCard.Discovery.Source(1).Compute(2).ValueList="3"

// Translate Speed
// PortID;WidthActive;PhysState;Speed;
NetworkCard.Discovery.Source(1).Compute(3).Type="Translate"
NetworkCard.Discovery.Source(1).Compute(3).Column=4
NetworkCard.Discovery.Source(1).Compute(3).TranslationTable="SpeedTranslationTable"

// PortTypeTranslationTable
SpeedTranslationTable(1)="2500"
SpeedTranslationTable(2)="5000"
SpeedTranslationTable(4)="10000"
SpeedTranslationTable(8)="30000"
SpeedTranslationTable(Default)=""

// Instance Table
// PortID;WidthActive;PhysState;Speed;
NetworkCard.Discovery.InstanceTable=%NetworkCard.Discovery.Source(1)%
NetworkCard.Discovery.Instance.DeviceID=InstanceTable.Column(1)
NetworkCard.Discovery.Instance.DisplayID=InstanceTable.Column(1)
NetworkCard.Discovery.Instance.DeviceType=InstanceTable.Column(2)
NetworkCard.Discovery.Instance.Bandwidth=InstanceTable.Column(4)


//
// Collect

// Collect type = multi-instance
NetworkCard.Collect.Type="MultiInstance"

// Source(1) = ibSmaPortInfoEntry SNMP Table
// PortID;WidthActive;LinkState;Speed;
NetworkCard.Collect.Source(1).Type="SnmpTable"
NetworkCard.Collect.Source(1).SnmpTableOid="1.3.6.1.4.1.42.2.135.2.2.5.1.1"
NetworkCard.Collect.Source(1).SnmpTableSelectColumns="ID,5,6,10"


// Need to Add ibPmaExtPortCntrsEntry  and  ibPmaPortCntrsTable when SNMP v2 is available.
// Translate Speed
// PortID;WidthActive;LinkState;Speed;
NetworkCard.Collect.Source(1).Compute(1).Type="Translate"
NetworkCard.Collect.Source(1).Compute(1).Column=4
NetworkCard.Collect.Source(1).Compute(1).TranslationTable="SpeedTranslationTable"

// Translate LinkState
// PortID;WidthActive;LinkState;Speed;
NetworkCard.Collect.Source(1).Compute(2).Type="Translate"
NetworkCard.Collect.Source(1).Compute(2).Column=3
NetworkCard.Collect.Source(1).Compute(2).TranslationTable="LinkStateTranslationTable"

// PortTypeTranslationTable
LinkStateTranslationTable(1)="WARN"
LinkStateTranslationTable(2)="OK"
LinkStateTranslationTable(3)="OK"
LinkStateTranslationTable(4)="OK"
LinkStateTranslationTable(Default)=""

// ValueTable
// PortID;WidthActive;LinkState;Speed;
NetworkCard.Collect.ValueTable=%NetworkCard.Collect.Source(1)%
NetworkCard.Collect.DeviceID=ValueTable.Column(1)
NetworkCard.Collect.LinkStatus=ValueTable.Column(3)
NetworkCard.Collect.LinkSpeed=ValueTable.Column(4)
