////////////////////////////////////////////////////////////////
//
//    H a r d w a r e   D e f i n i t i o n   F i l e
//
//                       f o r
//
//                 Hardware Sentry
//
//                 by Sentry Software (c)
//
//
//      Supports: Hitachi SMI-S Compliant Disk Arrays
//                Connects to a Hitachi SMI-S WBEM agent
//				  (namespace is root/smis/current)
//

//
// Header
//

hdf.DisplayName="Fujitsu Eternus DX Disk Arrays"
hdf.TypicalPlatform="Fujitsu Eternus"
hdf.ReliesOn="Fujitsu Eternus SMI-S Server"
hdf.Version="1.0"
hdf.Comments="This connector discovers the enclosure and the disks of Fujitsu SAN disk arrays, as well as the storage pools and storage volumes. It will also discover and monitor the FC ports of the array and the various environment sensors when available (temperatures, fans, power supplies, etc.). It relies on the WBEM technology and supports SMI-S compliant disk arrays only."
hdf.RemoteSupport="true"
hdf.AppliesToOS="Storage"

// Supersedes the existing SMIS Disk Array Connector
hdf.Supersedes="MS_HW_SMISDiskArray.hdf"

//
// Detection
//

// Verify that there is an FUJITSU_StorageComputerSystem instance

Detection.Criteria(1).Type="WBEM"
Detection.Criteria(1).WbemNameSpace="root/eternus"
Detection.Criteria(1).WbemQuery="SELECT Name,Dedicated FROM FUJITSU_StorageComputerSystem"

// There also must be disk drives declared in this namespace
// Detection.Criteria(2).Type="WBEM"
// Detection.Criteria(2).WbemNameSpace="root/eternus"
// Detection.Criteria(2).WbemQuery="SELECT DeviceID FROM FUJITSU_DiskDrive"


//
// Enclosure
//

//
// Discovery

// Source = FUJITSU_StorageComputerSystem
// FUJITSU_StorageComputerSystem;DeviceID;SystemName;
Enclosure.Discovery.Source(1).Type="WBEM"
Enclosure.Discovery.Source(1).WbemQuery="SELECT __Path,Name,ElementName FROM FUJITSU_StorageComputerSystem"
Enclosure.Discovery.Source(1).WbemNameSpace="root/eternus"

// Get the link between FUJITSU_ControllerEnclosure and  FUJITSU_StorageComputerSystem
// FUJITSU_ControllerEnclosure;FUJITSU_StorageComputerSystem
Enclosure.Discovery.Source(2).Type="WBEM"
Enclosure.Discovery.Source(2).WbemQuery="SELECT Antecedent,Dependent FROM CIM_ComputerSystemPackage"
Enclosure.Discovery.Source(2).WbemNameSpace="root/eternus"

// Large Table (Should only be used on Right)
// Get the link between  and
// FUJITSU_StorageProduct;FUJITSU_ControllerEnclosure
Enclosure.Discovery.Source(3).Type="WBEM"
Enclosure.Discovery.Source(3).WbemQuery="SELECT GroupComponent,PartComponent FROM CIM_ProductPhysicalComponent"
Enclosure.Discovery.Source(3).WbemNameSpace="root/eternus"

// Source = FUJITSU_StorageProduct
// FUJITSU_StorageProduct;Model;Vendor;Firmware;SerialNumber;
Enclosure.Discovery.Source(4).Type="WBEM"
Enclosure.Discovery.Source(4).WbemQuery="SELECT __Path,Name,Vendor,Version,IdentifyingNumber FROM FUJITSU_StorageProduct"
Enclosure.Discovery.Source(4).WbemNameSpace="root/eternus"

// Link FUJITSU_StorageComputerSystem to FUJITSU_ControllerEnclosure
// FUJITSU_StorageComputerSystem;DeviceID;SystemName;FUJITSU_ControllerEnclosure;FUJITSU_StorageComputerSystem;
Enclosure.Discovery.Source(5).Type="TableJoint"
Enclosure.Discovery.Source(5).LeftTable=%Enclosure.Discovery.Source(1)%
Enclosure.Discovery.Source(5).RightTable=%Enclosure.Discovery.Source(2)%
Enclosure.Discovery.Source(5).LeftKeyColumn=1
Enclosure.Discovery.Source(5).RightKeyColumn=2
Enclosure.Discovery.Source(5).KeyType="Wbem"

// Link FUJITSU_StorageProduct to FUJITSU_ControllerEnclosure
// FUJITSU_StorageComputerSystem;DeviceID;SystemName;FUJITSU_ControllerEnclosure;FUJITSU_StorageComputerSystem;FUJITSU_StorageProduct;FUJITSU_ControllerEnclosure;
Enclosure.Discovery.Source(6).Type="TableJoint"
Enclosure.Discovery.Source(6).LeftTable=%Enclosure.Discovery.Source(5)%
Enclosure.Discovery.Source(6).RightTable=%Enclosure.Discovery.Source(3)%
Enclosure.Discovery.Source(6).LeftKeyColumn=4
Enclosure.Discovery.Source(6).RightKeyColumn=2
Enclosure.Discovery.Source(6).KeyType="Wbem"

// Link FUJITSU_StorageProduct info to the main table.
//          1                        2        3                     4                       5                         6                     7                              8               9     10      11        12
// FUJITSU_StorageComputerSystem;DeviceID;SystemName;FUJITSU_ControllerEnclosure;FUJITSU_StorageComputerSystem;FUJITSU_StorageProduct;FUJITSU_ControllerEnclosure;FUJITSU_StorageProduct;Model;Vendor;Firmware;SerialNumber;
Enclosure.Discovery.Source(7).Type="TableJoint"
Enclosure.Discovery.Source(7).LeftTable=%Enclosure.Discovery.Source(6)%
Enclosure.Discovery.Source(7).RightTable=%Enclosure.Discovery.Source(4)%
Enclosure.Discovery.Source(7).LeftKeyColumn=6
Enclosure.Discovery.Source(7).RightKeyColumn=1
Enclosure.Discovery.Source(7).KeyType="Wbem"

// Get rid of the Paths
//          1                        2        3                     4                       5                         6                     7                              8               9     10      11        12
// FUJITSU_StorageComputerSystem;DeviceID;SystemName;FUJITSU_ControllerEnclosure;FUJITSU_StorageComputerSystem;FUJITSU_StorageProduct;FUJITSU_ControllerEnclosure;FUJITSU_StorageProduct;Model;Vendor;Firmware;SerialNumber;
//                               DeviceID;SystemName;                                                                                                                                    Model;Vendor;Firmware;SerialNumber;
Enclosure.Discovery.Source(7).Compute(1).Type="KeepColumns"
Enclosure.Discovery.Source(7).Compute(1).ColumnNumbers="2,3,9,10,11,12"

Enclosure.Discovery.Source(7).Compute(2).Type="LeftConcat"
Enclosure.Discovery.Source(7).Compute(2).Column=5
Enclosure.Discovery.Source(7).Compute(2).String="FirmwareVersion: "

// The Instance Table
// DeviceID;SystemName;Model;Vendor;Firmware;SerialNumber;
Enclosure.Discovery.InstanceTable=%Enclosure.Discovery.Source(7)%
Enclosure.Discovery.Instance.DeviceID=InstanceTable.Column(1)
Enclosure.Discovery.Instance.DisplayID=InstanceTable.Column(2)
Enclosure.Discovery.Instance.Vendor=InstanceTable.Column(4)
Enclosure.Discovery.Instance.Model=InstanceTable.Column(3)
Enclosure.Discovery.Instance.SerialNumber=InstanceTable.Column(6)
Enclosure.Discovery.Instance.AdditionalInformation1=InstanceTable.Column(5)
Enclosure.Discovery.Instance.Type="Storage"

// COMPONENTS

// Association Queries used by other classes
// ENCLOSURES;FUJITSU_StorageComputerSystem;
Enclosure.Discovery.Source(8).Type="WBEM"
Enclosure.Discovery.Source(8).WbemQuery="SELECT Antecedent,Dependent FROM CIM_SystemPackaging"
Enclosure.Discovery.Source(8).WbemNameSpace="root/eternus"


// ENCLOSURES;COMPONENT;
// Examples:
// FUJITSU_DeviceEnclosure           ;FUJITSU_PSU
// FUJITSU_ControllerEnclosure       ;FUJITSU_BCU
// FUJITSU_ControllerCard            ;FUJITSU_IOM
Enclosure.Discovery.Source(9).Type="WBEM"
Enclosure.Discovery.Source(9).WbemQuery="SELECT GroupComponent,PartComponent FROM CIM_PackageInChassis"
Enclosure.Discovery.Source(9).WbemNameSpace="root/eternus"

// Attach The Enclosures to the FUJITSU_StorageComputerSystem
// ENCLOSURES;FUJITSU_StorageComputerSystem;FUJITSU_StorageComputerSystem;DeviceID;SystemName;
Enclosure.Discovery.Source(10).Type="TableJoint"
Enclosure.Discovery.Source(10).LeftTable=%Enclosure.Discovery.Source(8)%
Enclosure.Discovery.Source(10).RightTable=%Enclosure.Discovery.Source(1)%
Enclosure.Discovery.Source(10).LeftKeyColumn=2
Enclosure.Discovery.Source(10).RightKeyColumn=1
Enclosure.Discovery.Source(10).KeyType="Wbem"

// Attach The Components to the Enclosures
// ENCLOSURES;COMPONENT;ENCLOSURES;FUJITSU_StorageComputerSystem;FUJITSU_StorageComputerSystem;SystemID;SystemName;
Enclosure.Discovery.Source(11).Type="TableJoint"
Enclosure.Discovery.Source(11).LeftTable=%Enclosure.Discovery.Source(9)%
Enclosure.Discovery.Source(11).RightTable=%Enclosure.Discovery.Source(10)%
Enclosure.Discovery.Source(11).LeftKeyColumn=1
Enclosure.Discovery.Source(11).RightKeyColumn=1
Enclosure.Discovery.Source(11).KeyType="Wbem"

// Get rid of everything except COMPONENT Path DeviceID
// COMPONENT = FUJITSU_PSU / FUJITSU_BCU / FUJITSU_IOM / FUJITSU_ChannelAdapterCard / FUJITSU_ControllerCard
// COMPONENT;SystemID;
Enclosure.Discovery.Source(11).Compute(1).Type="KeepColumns"
Enclosure.Discovery.Source(11).Compute(1).ColumnNumbers="2,6"

// SUB-COMPONENTS
// SUBCOMPONENT = FUJITSU_BTU / FUJITSU_SFP / FUJITSU_PhysicalMemory / FUJITSU_ChannelAdapterCard
// SUBCOMPONENT;COMPONENT;
Enclosure.Discovery.Source(12).Type="WBEM"
Enclosure.Discovery.Source(12).WbemQuery="SELECT GroupComponent,PartComponent FROM CIM_Container"
Enclosure.Discovery.Source(12).WbemNameSpace="root/eternus"


// As this gets alot of associations (sub-classes) we don't need, let's just keep the ones we do (CIM_Container,CIM_MemoryOnCard)
// SUBCOMPONENT;COMPONENT;
// Enclosure.Discovery.Source(12).Compute(2).Type="KeepOnlyMatchingLines"
// Enclosure.Discovery.Source(12).Compute(2).Column=1
// Enclosure.Discovery.Source(12).Compute(2).ValueList="CIM_Container,CIM_MemoryOnCard"

// Attach each SUBCOMPONENT to the COMPONENT/System Table
// SUBCOMPONENT;COMPONENT;COMPONENT;SystemName;
Enclosure.Discovery.Source(13).Type="TableJoint"
Enclosure.Discovery.Source(13).LeftTable=%Enclosure.Discovery.Source(12)%
Enclosure.Discovery.Source(13).RightTable=%Enclosure.Discovery.Source(11)%
Enclosure.Discovery.Source(13).LeftKeyColumn=2
Enclosure.Discovery.Source(13).RightKeyColumn=1
Enclosure.Discovery.Source(13).KeyType="Wbem"

// Keep only the subcomponent and SystemName
// SUBCOMPONENT;SystemName;
Enclosure.Discovery.Source(13).Compute(1).Type="KeepColumns"
Enclosure.Discovery.Source(13).Compute(1).ColumnNumbers="1,4"


//
// Collect

// Collect type is multiinstance
Enclosure.Collect.Type="MultiInstance"

// Source(1) = CIM_ComputerSystem (what else? we're looking for logical devices that have
// a status, and that corresponds to a CIM_Chassis instance)
// ComputerID;OperationalStatus;
Enclosure.Collect.Source(1).Type="Wbem"
Enclosure.Collect.Source(1).WbemQuery="SELECT Name,OperationalStatus FROM FUJITSU_StorageComputerSystem"
Enclosure.Collect.Source(1).WbemNamespace="root/eternus"

// Duplicate the "OperationalStatusArray" column
// ComputerID;OperationalStatusArray;OperationalStatusArray;
Enclosure.Collect.Source(1).Compute(1).Type="DuplicateColumn"
Enclosure.Collect.Source(1).Compute(1).Column=2

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// ComputerID;PATROLStatusArray;Status
Enclosure.Collect.Source(1).Compute(2).Type="ArrayTranslate"
Enclosure.Collect.Source(1).Compute(2).Column=2
Enclosure.Collect.Source(1).Compute(2).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// ComputerID;PATROLStatusArray;StatusInformation
Enclosure.Collect.Source(1).Compute(3).Type="ArrayTranslate"
Enclosure.Collect.Source(1).Compute(3).Column=3
Enclosure.Collect.Source(1).Compute(3).TranslationTable="DMTFOperationStatusInformationTranslationTable"
Enclosure.Collect.Source(1).Compute(3).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// ComputerID;PATROLStatus;StatusInformation
Enclosure.Collect.Source(1).Compute(4).Type="Convert"
Enclosure.Collect.Source(1).Compute(4).Column=2
Enclosure.Collect.Source(1).Compute(4).ConversionType="Array2SimpleStatus"

// ValueTable = Source(1)
Enclosure.Collect.ValueTable=%Enclosure.Collect.Source(1)%
Enclosure.Collect.DeviceID=ValueTable.Column(1)
Enclosure.Collect.Status=ValueTable.Column(2)
Enclosure.Collect.StatusInformation=ValueTable.Column(3)


//
//  Physical disks
//

//
// Discovery

// Source(1) = FUJITSU_DiskDrive
// DeviceID;Name;SystemName;SizeKB;FUJITSU_DiskDrive;
PhysicalDisk.Discovery.Source(1).Type="WBEM"
PhysicalDisk.Discovery.Source(1).WbemQuery="SELECT DeviceID,Name,SystemName,MaxMediaSize,__Path FROM FUJITSU_DiskDrive"
PhysicalDisk.Discovery.Source(1).WbemNameSpace="root/eternus"

// Remove "Disk Drive - " from the Name
// DeviceID;Name;SystemName;SizeKB;FUJITSU_DiskDrive;
PhysicalDisk.Discovery.Source(1).Compute(1).Type="Replace"
PhysicalDisk.Discovery.Source(1).Compute(1).Column=2
PhysicalDisk.Discovery.Source(1).Compute(1).Replace="Disk Drive - "
PhysicalDisk.Discovery.Source(1).Compute(1).ReplaceBy=""

// Convert the Disk Size to Bytes
// DeviceID;Name;SystemName;SizeB;FUJITSU_DiskDrive;
PhysicalDisk.Discovery.Source(1).Compute(2).Type="Multiply"
PhysicalDisk.Discovery.Source(1).Compute(2).Column=4
PhysicalDisk.Discovery.Source(1).Compute(2).MultiplyBy="1024"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID;Name;SystemName;SizeB;FUJITSU_DiskDrive;
PhysicalDisk.Discovery.Source(1).Compute(3).Type="LeftConcat"
PhysicalDisk.Discovery.Source(1).Compute(3).Column=1
PhysicalDisk.Discovery.Source(1).Compute(3).String=":"

PhysicalDisk.Discovery.Source(1).Compute(4).Type="LeftConcat"
PhysicalDisk.Discovery.Source(1).Compute(4).Column=1
PhysicalDisk.Discovery.Source(1).Compute(4).String=Column(3)

// Source(2) = FUJITSU_PhysicalDisk
// FUJITSU_PhysicalDisk;Manufacturer;Model;SerialNumber;DriveType;FirmwareVersion;
PhysicalDisk.Discovery.Source(2).Type="WBEM"
PhysicalDisk.Discovery.Source(2).WbemQuery="SELECT __Path,Manufacturer,Model,SerialNumber,Type,Version FROM FUJITSU_PhysicalDisk"
PhysicalDisk.Discovery.Source(2).WbemNameSpace="root/eternus"

// Get DiskDrive to PhysicalDisk Association Table
// FUJITSU_PhysicalDisk,FUJITSU_DiskDrive
PhysicalDisk.Discovery.Source(3).Type="WBEM"
PhysicalDisk.Discovery.Source(3).WbemQuery="SELECT Antecedent,Dependent FROM CIM_Realizes"
PhysicalDisk.Discovery.Source(3).WbemNameSpace="root/eternus"

// Attach FUJITSU_DiskDrive to CIM_Realizes
// DeviceID;Name;SystemName;SizeKB;FUJITSU_DiskDrive;FUJITSU_PhysicalDisk;FUJITSU_DiskDrive;
PhysicalDisk.Discovery.Source(4).Type="TableJoint"
PhysicalDisk.Discovery.Source(4).LeftTable=%PhysicalDisk.Discovery.Source(1)%
PhysicalDisk.Discovery.Source(4).RightTable=%PhysicalDisk.Discovery.Source(3)%
PhysicalDisk.Discovery.Source(4).LeftKeyColumn=5
PhysicalDisk.Discovery.Source(4).RightKeyColumn=2
PhysicalDisk.Discovery.Source(4).KeyType="Wbem"

// Attach Source (4) to FUJITSU_PhysicalDisk
// DeviceID;Name;SystemName;SizeKB;FUJITSU_DiskDrive;FUJITSU_PhysicalDisk;FUJITSU_DiskDrive;FUJITSU_PhysicalDisk;Manufacturer;Model;SerialNumber;DriveType;FirmwareVersion;
PhysicalDisk.Discovery.Source(5).Type="TableJoint"
PhysicalDisk.Discovery.Source(5).LeftTable=%PhysicalDisk.Discovery.Source(4)%
PhysicalDisk.Discovery.Source(5).RightTable=%PhysicalDisk.Discovery.Source(2)%
PhysicalDisk.Discovery.Source(5).LeftKeyColumn=6
PhysicalDisk.Discovery.Source(5).RightKeyColumn=1
PhysicalDisk.Discovery.Source(5).KeyType="Wbem"

// Get rid of Paths
//      1     2      3          4      5                 6                      7                   8                    9      10    11             12          13
// DeviceID;Name;SystemName;SizeKB;FUJITSU_DiskDrive;FUJITSU_PhysicalDisk;FUJITSU_DiskDrive;FUJITSU_PhysicalDisk;Manufacturer;Model;SerialNumber;DriveType;FirmwareVersion;
// DeviceID;Name;SystemName;SizeKB;                                                                              Manufacturer;Model;SerialNumber;DriveType;FirmwareVersion;
PhysicalDisk.Discovery.Source(5).Compute(1).Type="KeepColumns"
PhysicalDisk.Discovery.Source(5).Compute(1).ColumnNumbers="1,2,3,4,9,10,11,12,13"

PhysicalDisk.Discovery.Source(5).Compute(2).Type="LeftConcat"
PhysicalDisk.Discovery.Source(5).Compute(2).Column=8
PhysicalDisk.Discovery.Source(5).Compute(2).String="Disk Type: "

// Instance Table
//    1      2        3       4         5        6       7              8          9
// DeviceID;Name;SystemName;SizeKB;Manufacturer;Model;SerialNumber;DriveType;FirmwareVersion;
PhysicalDisk.Discovery.InstanceTable=%PhysicalDisk.Discovery.Source(5)%
PhysicalDisk.Discovery.Instance.DeviceID=InstanceTable.Column(1)
PhysicalDisk.Discovery.Instance.DisplayID=InstanceTable.Column(2)
PhysicalDisk.Discovery.Instance.Vendor=InstanceTable.Column(5)
PhysicalDisk.Discovery.Instance.Model=InstanceTable.Column(6)
PhysicalDisk.Discovery.Instance.SerialNumber=InstanceTable.Column(7)
PhysicalDisk.Discovery.Instance.AdditionalInformation1=InstanceTable.Column(8)
PhysicalDisk.Discovery.Instance.Size=InstanceTable.Column(4)
PhysicalDisk.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(3)
PhysicalDisk.Discovery.Instance.FirmwareVersion=InstanceTable.Column(9)

//
// Collect

// Collect type is multiinstance
PhysicalDisk.Collect.Type="MultiInstance"

// Source(1) = HITACHI_DiskDrive
// SystemName;DeviceID;OperationalStatus;
PhysicalDisk.Collect.Source(1).Type="Wbem"
PhysicalDisk.Collect.Source(1).WbemQuery="SELECT SystemName,DeviceID,OperationalStatus FROM FUJITSU_DiskDrive"
PhysicalDisk.Collect.Source(1).WbemNameSpace="root/eternus"

// Add ":" And SystemaName to DeviceID to make ID unique
// SystemName,DeviceID,OperationalStatus
PhysicalDisk.Collect.Source(1).Compute(1).Type="LeftConcat"
PhysicalDisk.Collect.Source(1).Compute(1).Column=2
PhysicalDisk.Collect.Source(1).Compute(1).String=":"

PhysicalDisk.Collect.Source(1).Compute(2).Type="LeftConcat"
PhysicalDisk.Collect.Source(1).Compute(2).Column=2
PhysicalDisk.Collect.Source(1).Compute(2).String=Column(1)

// Duplicate the "OperationalStatus" column
// SystemName,DeviceID,OperationalStatus
PhysicalDisk.Collect.Source(1).Compute(3).Type="DuplicateColumn"
PhysicalDisk.Collect.Source(1).Compute(3).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// SystemName,DeviceID,PATROLStatusArray,OperationalStatus
PhysicalDisk.Collect.Source(1).Compute(4).Type="ArrayTranslate"
PhysicalDisk.Collect.Source(1).Compute(4).Column=3
PhysicalDisk.Collect.Source(1).Compute(4).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// SystemName,DeviceID,PATROLStatusArray,StatusInformation
PhysicalDisk.Collect.Source(1).Compute(5).Type="ArrayTranslate"
PhysicalDisk.Collect.Source(1).Compute(5).Column=4
PhysicalDisk.Collect.Source(1).Compute(5).TranslationTable="DMTFOperationStatusInformationTranslationTable"
PhysicalDisk.Collect.Source(1).Compute(5).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// SystemName,DeviceID,PATROLStatus,StatusInformation
PhysicalDisk.Collect.Source(1).Compute(6).Type="Convert"
PhysicalDisk.Collect.Source(1).Compute(6).Column=3
PhysicalDisk.Collect.Source(1).Compute(6).ConversionType="Array2SimpleStatus"

// ValueTable = Source(1)
// SystemName,DeviceID,PATROLStatus,StatusDescriptions
PhysicalDisk.Collect.ValueTable=%PhysicalDisk.Collect.Source(1)%
PhysicalDisk.Collect.DeviceID=ValueTable.Column(2)
PhysicalDisk.Collect.Status=ValueTable.Column(3)
PhysicalDisk.Collect.StatusInformation=ValueTable.Column(4)



//
// Network Cards

// Source(1) = HITACHI_FCPort
//  DeviceID,SystemName,Speedbps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.Source(1).Type="WBEM"
NetworkCard.Discovery.Source(1).WbemQuery="SELECT DeviceID,SystemName,Speedbps,PermanentAddress,UsageRestriction,PortType FROM FUJITSU_FCPort"
NetworkCard.Discovery.Source(1).WbemNameSpace="root/eternus"

// convert from bit per second to mega bytes per second
// DeviceID,SystemName,SpeedMBps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.Source(1).Compute(1).Type="Divide"
NetworkCard.Discovery.Source(1).Compute(1).Column=3
NetworkCard.Discovery.Source(1).Compute(1).DivideBy=1062500

// Translate the Port Type (FC Only)
// DeviceID,SystemName,SpeedMBps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.Source(1).Compute(2).Type="Translate"
NetworkCard.Discovery.Source(1).Compute(2).Column=6
NetworkCard.Discovery.Source(1).Compute(2).TranslationTable="PortTypeTranslationTable"

// The PortTypeTranslationTable
PortTypeTranslationTable(10)="FC Port N"
PortTypeTranslationTable(11)="FC Port NL"
PortTypeTranslationTable(12)="FC Port F/NL"
PortTypeTranslationTable(13)="FC Port Nx"
PortTypeTranslationTable(14)="FC Port E"
PortTypeTranslationTable(15)="FC Port F"
PortTypeTranslationTable(16)="FC Port FL"
PortTypeTranslationTable(17)="FC Port B"
PortTypeTranslationTable(18)="FC Port G"
PortTypeTranslationTable(19)="FC Port GL"
PortTypeTranslationTable(Default)="FC Port"

// Translate the Port Direction
// DeviceID,SystemName,SpeedMBps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.Source(1).Compute(3).Type="Translate"
NetworkCard.Discovery.Source(1).Compute(3).Column=5
NetworkCard.Discovery.Source(1).Compute(3).TranslationTable="UsageRestrictionTranslationTable"

// The UsageRestrictionTranslationTable
UsageRestrictionTranslationTable(2)="Front-end Port"
UsageRestrictionTranslationTable(3)="Back-end Port"
UsageRestrictionTranslationTable(Default)=""

// Duplicate the DeviceID to allow a DisplayID
// DisplayID,DeviceID,SystemName,SpeedMBps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.Source(1).Compute(4).Type="DuplicateColumn"
NetworkCard.Discovery.Source(1).Compute(4).Column=1

// Add ":" And SystemaName to Caption to make DeviceID unique
// DisplayID,DeviceID,SystemName,SpeedMBps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.Source(1).Compute(5).Type="LeftConcat"
NetworkCard.Discovery.Source(1).Compute(5).Column=2
NetworkCard.Discovery.Source(1).Compute(5).String=":"

NetworkCard.Discovery.Source(1).Compute(6).Type="LeftConcat"
NetworkCard.Discovery.Source(1).Compute(6).Column=2
NetworkCard.Discovery.Source(1).Compute(6).String=Column(3)

NetworkCard.Discovery.Source(1).Compute(7).Type="LeftConcat"
NetworkCard.Discovery.Source(1).Compute(7).Column=6
NetworkCard.Discovery.Source(1).Compute(7).String="Usage Restriction: "

// Instance Table
// DisplayID,DeviceID,SystemName,SpeedMBps,PermanentAddress,UsageRestriction,PortType
NetworkCard.Discovery.InstanceTable=%NetworkCard.Discovery.Source(1)%
NetworkCard.Discovery.Instance.DeviceID=InstanceTable.Column(2)
NetworkCard.Discovery.Instance.DisplayID=InstanceTable.Column(1)
NetworkCard.Discovery.Instance.BandWidth=InstanceTable.Column(4)
NetworkCard.Discovery.Instance.PhysicalAddress=InstanceTable.Column(5)
NetworkCard.Discovery.Instance.PhysicalAddressType="WWN"
NetworkCard.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(3)
NetworkCard.Discovery.Instance.DeviceType=InstanceTable.Column(7)
NetworkCard.Discovery.Instance.AdditionalInformation1=InstanceTable.Column(6)


//
// Collect

// Collect type is multiinstance
NetworkCard.Collect.Type="MultiInstance"

// Source(1) = HITACHI_FCPort
// DeviceID,Speed,OperationalStatus,SystemName
NetworkCard.Collect.Source(1).Type="Wbem"
NetworkCard.Collect.Source(1).WbemQuery="SELECT DeviceID,Speed,OperationalStatus,SystemName FROM FUJITSU_FCPort"
NetworkCard.Collect.Source(1).WbemNameSpace="root/eternus"

// convert from bit per second to mega bytes per second
// DeviceID,Speed,OperationalStatus,SystemName
NetworkCard.Collect.Source(1).Compute(1).Type="Divide"
NetworkCard.Collect.Source(1).Compute(1).Column=2
NetworkCard.Collect.Source(1).Compute(1).DivideBy=1062500

// Duplicate the "OperationalStatus" column
// DeviceID,Speed,OperationalStatus,OperationalStatus,SystemName
NetworkCard.Collect.Source(1).Compute(2).Type="DuplicateColumn"
NetworkCard.Collect.Source(1).Compute(2).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// DeviceID,Speed,PATROLStatusArray,OperationalStatus,SystemName
NetworkCard.Collect.Source(1).Compute(3).Type="ArrayTranslate"
NetworkCard.Collect.Source(1).Compute(3).Column=3
NetworkCard.Collect.Source(1).Compute(3).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// DeviceID,Speed,PATROLStatusArray,StatusInformation,SystemName
NetworkCard.Collect.Source(1).Compute(4).Type="ArrayTranslate"
NetworkCard.Collect.Source(1).Compute(4).Column=4
NetworkCard.Collect.Source(1).Compute(4).TranslationTable="DMTFOperationStatusInformationTranslationTable"
NetworkCard.Collect.Source(1).Compute(4).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// DeviceID,Speed,PATROLStatus,StatusInformation,SystemName
NetworkCard.Collect.Source(1).Compute(5).Type="Convert"
NetworkCard.Collect.Source(1).Compute(5).Column=3
NetworkCard.Collect.Source(1).Compute(5).ConversionType="Array2SimpleStatus"

// Add ":" And SystemaName to Caption to make DeviceID unique
// DeviceID,Speed,PATROLStatus,StatusInformation,SystemName
NetworkCard.Collect.Source(1).Compute(6).Type="LeftConcat"
NetworkCard.Collect.Source(1).Compute(6).Column=1
NetworkCard.Collect.Source(1).Compute(6).String=":"

NetworkCard.Collect.Source(1).Compute(7).Type="LeftConcat"
NetworkCard.Collect.Source(1).Compute(7).Column=1
NetworkCard.Collect.Source(1).Compute(7).String=Column(5)

// ValueTable = Source(1)
// DeviceID,Speed,PATROLStatus,StatusInformation,SystemName
NetworkCard.Collect.ValueTable=%Networkcard.Collect.Source(1)%
NetworkCard.Collect.DeviceID=ValueTable.Column(1)
NetworkCard.Collect.LinkSpeed=ValueTable.Column(2)
NetworkCard.Collect.Status=ValueTable.Column(3)
NetworkCard.Collect.StatusInformation=ValueTable.Column(4)

//
//  Fans
//

//
// Discovery

// Source(1) = FUJITSU_FAN
// FUJITSU_FAN,DeviceID
Fan.Discovery.Source(1).Type="WBEM"
Fan.Discovery.Source(1).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_FAN"
Fan.Discovery.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_FAN,DeviceID
Fan.Discovery.Source(1).Compute(1).Type="Replace"
Fan.Discovery.Source(1).Compute(1).Column=2
Fan.Discovery.Source(1).Compute(1).Replace="FAN - "
Fan.Discovery.Source(1).Compute(1).ReplaceBy=""

// Duplicate the DeviceID to make DeviceID and DisplayID
// FUJITSU_FAN,DeviceID,DisplayID
Fan.Discovery.Source(1).Compute(2).Type="DuplicateColumn"
Fan.Discovery.Source(1).Compute(2).Column=2

// Let's associate the FUJITSU_FAN with the enclosure using the SubComponent to System table
// FUJITSU_FAN,DeviceID,DisplayID,SUBCOMPONENT;SystemName;
Fan.Discovery.Source(2).Type="TableJoint"
Fan.Discovery.Source(2).LeftTable=%Fan.Discovery.Source(1)%
Fan.Discovery.Source(2).RightTable=%Enclosure.Discovery.Source(13)%
Fan.Discovery.Source(2).LeftKeyColumn=1
Fan.Discovery.Source(2).RightKeyColumn=1
Fan.Discovery.Source(2).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,DisplayID,SystemName
Fan.Discovery.Source(2).Compute(1).Type="KeepColumns"
Fan.Discovery.Source(2).Compute(1).ColumnNumbers="2,3,5"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,DisplayID,SystemName
Fan.Discovery.Source(2).Compute(2).Type="LeftConcat"
Fan.Discovery.Source(2).Compute(2).Column=1
Fan.Discovery.Source(2).Compute(2).String=":"

Fan.Discovery.Source(2).Compute(3).Type="LeftConcat"
Fan.Discovery.Source(2).Compute(3).Column=1
Fan.Discovery.Source(2).Compute(3).String=Column(3)

// Instance Table
// DeviceID,DisplayID,SystemName
Fan.Discovery.InstanceTable=%Fan.Discovery.Source(2)%
Fan.Discovery.Instance.DeviceID=InstanceTable.Column(1)
Fan.Discovery.Instance.DisplayID=InstanceTable.Column(2)
Fan.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(3)

//
// Collect

// Collect type is multiinstance
Fan.Collect.Type="MultiInstance"

// Source(1) = FUJITSU_FAN
// FUJITSU_FAN;DeviceID;OperationalStatus;
Fan.Collect.Source(1).Type="Wbem"
Fan.Collect.Source(1).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_FAN"
Fan.Collect.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_FAN,DeviceID,OperationalStatus;
Fan.Collect.Source(1).Compute(1).Type="Replace"
Fan.Collect.Source(1).Compute(1).Column=2
Fan.Collect.Source(1).Compute(1).Replace="FAN - "
Fan.Collect.Source(1).Compute(1).ReplaceBy=""

// Duplicate the "OperationalStatus" column
// FUJITSU_FAN,DeviceID,OperationalStatus
Fan.Collect.Source(1).Compute(2).Type="DuplicateColumn"
Fan.Collect.Source(1).Compute(2).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// FUJITSU_FAN,DeviceID,PATROLStatusArray,OperationalStatus
Fan.Collect.Source(1).Compute(3).Type="ArrayTranslate"
Fan.Collect.Source(1).Compute(3).Column=3
Fan.Collect.Source(1).Compute(3).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// FUJITSU_FAN,DeviceID,PATROLStatusArray,StatusInformation
Fan.Collect.Source(1).Compute(4).Type="ArrayTranslate"
Fan.Collect.Source(1).Compute(4).Column=4
Fan.Collect.Source(1).Compute(4).TranslationTable="DMTFOperationStatusInformationTranslationTable"
Fan.Collect.Source(1).Compute(4).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// FUJITSU_FAN,DeviceID,PATROLStatus,StatusInformation
Fan.Collect.Source(1).Compute(5).Type="Convert"
Fan.Collect.Source(1).Compute(5).Column=3
Fan.Collect.Source(1).Compute(5).ConversionType="Array2SimpleStatus"

// Let's associate the FUJITSU_FAN with the enclosure using the SubComponent to System table
// FUJITSU_FAN,DeviceID,PATROLStatus,StatusInformation,SUBCOMPONENT;SystemName;
Fan.Collect.Source(2).Type="TableJoint"
Fan.Collect.Source(2).LeftTable=%Fan.Collect.Source(1)%
Fan.Collect.Source(2).RightTable=%Enclosure.Discovery.Source(13)%
Fan.Collect.Source(2).LeftKeyColumn=1
Fan.Collect.Source(2).RightKeyColumn=1
Fan.Collect.Source(2).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Fan.Collect.Source(2).Compute(1).Type="KeepColumns"
Fan.Collect.Source(2).Compute(1).ColumnNumbers="2,3,4,6"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Fan.Collect.Source(2).Compute(2).Type="LeftConcat"
Fan.Collect.Source(2).Compute(2).Column=1
Fan.Collect.Source(2).Compute(2).String=":"

Fan.Collect.Source(2).Compute(3).Type="LeftConcat"
Fan.Collect.Source(2).Compute(3).Column=1
Fan.Collect.Source(2).Compute(3).String=Column(4)

// ValueTable = Source(1)
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Fan.Collect.ValueTable=%Fan.Collect.Source(2)%
Fan.Collect.DeviceID=ValueTable.Column(1)
Fan.Collect.Status=ValueTable.Column(2)
Fan.Collect.StatusInformation=ValueTable.Column(3)

 //
//  Batteries
//

//
// Discovery

// Source(1) = FUJITSU_BTU (Battery Units)
// FUJITSU_BTU,DeviceID
Battery.Discovery.Source(1).Type="WBEM"
Battery.Discovery.Source(1).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_BTU"
Battery.Discovery.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_BTU,DeviceID
Battery.Discovery.Source(1).Compute(1).Type="Replace"
Battery.Discovery.Source(1).Compute(1).Column=2
Battery.Discovery.Source(1).Compute(1).Replace="Battery Unit - "
Battery.Discovery.Source(1).Compute(1).ReplaceBy="BatteryUnit-"

// Duplicate the DeviceID to make DeviceID and DisplayID
// FUJITSU_BTU,DeviceID,DisplayID
Battery.Discovery.Source(1).Compute(2).Type="DuplicateColumn"
Battery.Discovery.Source(1).Compute(2).Column=2

// Let's associate the FUJITSU_BTU with the enclosure using the SubComponent to System table
// FUJITSU_BTU,DeviceID,DisplayID,SUBCOMPONENT;SystemName;
Battery.Discovery.Source(2).Type="TableJoint"
Battery.Discovery.Source(2).LeftTable=%Battery.Discovery.Source(1)%
Battery.Discovery.Source(2).RightTable=%Enclosure.Discovery.Source(13)%
Battery.Discovery.Source(2).LeftKeyColumn=1
Battery.Discovery.Source(2).RightKeyColumn=1
Battery.Discovery.Source(2).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,DisplayID,SystemName
Battery.Discovery.Source(2).Compute(1).Type="KeepColumns"
Battery.Discovery.Source(2).Compute(1).ColumnNumbers="2,3,5"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,DisplayID,SystemName
Battery.Discovery.Source(2).Compute(2).Type="LeftConcat"
Battery.Discovery.Source(2).Compute(2).Column=1
Battery.Discovery.Source(2).Compute(2).String=":"

Battery.Discovery.Source(2).Compute(3).Type="LeftConcat"
Battery.Discovery.Source(2).Compute(3).Column=1
Battery.Discovery.Source(2).Compute(3).String=Column(3)

// Source(3) = FUJITSU_BCU (Battery Control Units)
// FUJITSU_BCU,DeviceID
Battery.Discovery.Source(3).Type="WBEM"
Battery.Discovery.Source(3).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_BCU"
Battery.Discovery.Source(3).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_BCU,DeviceID
Battery.Discovery.Source(3).Compute(1).Type="Replace"
Battery.Discovery.Source(3).Compute(1).Column=2
Battery.Discovery.Source(3).Compute(1).Replace="Battery Control Unit - "
Battery.Discovery.Source(3).Compute(1).ReplaceBy="BatteryControlUnit-"

// Duplicate the DeviceID to make DeviceID and DisplayID
// FUJITSU_BCU,DeviceID,DisplayID
Battery.Discovery.Source(3).Compute(2).Type="DuplicateColumn"
Battery.Discovery.Source(3).Compute(2).Column=2

// Let's associate the FUJITSU_BCU with the enclosure using the Component to System table
// FUJITSU_BCU,DeviceID,DisplayID,COMPONENT;SystemName;
Battery.Discovery.Source(4).Type="TableJoint"
Battery.Discovery.Source(4).LeftTable=%Battery.Discovery.Source(3)%
Battery.Discovery.Source(4).RightTable=%Enclosure.Discovery.Source(11)%
Battery.Discovery.Source(4).LeftKeyColumn=1
Battery.Discovery.Source(4).RightKeyColumn=1
Battery.Discovery.Source(4).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,DisplayID,SystemName
Battery.Discovery.Source(4).Compute(1).Type="KeepColumns"
Battery.Discovery.Source(4).Compute(1).ColumnNumbers="2,3,5"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,DisplayID,SystemName
Battery.Discovery.Source(4).Compute(2).Type="LeftConcat"
Battery.Discovery.Source(4).Compute(2).Column=1
Battery.Discovery.Source(4).Compute(2).String=":"

Battery.Discovery.Source(4).Compute(3).Type="LeftConcat"
Battery.Discovery.Source(4).Compute(3).Column=1
Battery.Discovery.Source(4).Compute(3).String=Column(3)

// Union BTU and BCU
// DeviceID,DisplayID,SystemName
Battery.Discovery.Source(5).Type="TableUnion"
Battery.Discovery.Source(5).Table1=%Battery.Discovery.Source(2)%
Battery.Discovery.Source(5).Table2=%Battery.Discovery.Source(4)%

// Instance Table
// DeviceID,DisplayID,SystemName
Battery.Discovery.InstanceTable=%Battery.Discovery.Source(5)%
Battery.Discovery.Instance.DeviceID=InstanceTable.Column(1)
Battery.Discovery.Instance.DisplayID=InstanceTable.Column(2)
Battery.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(3)

//
// Collect

// Collect type is multiinstance
Battery.Collect.Type="MultiInstance"

// Source(1) = FUJITSU_BTU
// FUJITSU_BTU;DeviceID;OperationalStatus;
Battery.Collect.Source(1).Type="Wbem"
Battery.Collect.Source(1).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_BTU"
Battery.Collect.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_BTU,DeviceID,OperationalStatus;
Battery.Collect.Source(1).Compute(1).Type="Replace"
Battery.Collect.Source(1).Compute(1).Column=2
Battery.Collect.Source(1).Compute(1).Replace="Battery Unit - "
Battery.Collect.Source(1).Compute(1).ReplaceBy="BatteryUnit-"

// Duplicate the "OperationalStatus" column
// FUJITSU_BTU,DeviceID,OperationalStatus
Battery.Collect.Source(1).Compute(2).Type="DuplicateColumn"
Battery.Collect.Source(1).Compute(2).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// FUJITSU_BTU,DeviceID,PATROLStatusArray,OperationalStatus
Battery.Collect.Source(1).Compute(3).Type="ArrayTranslate"
Battery.Collect.Source(1).Compute(3).Column=3
Battery.Collect.Source(1).Compute(3).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// FUJITSU_BTU,DeviceID,PATROLStatusArray,StatusInformation
Battery.Collect.Source(1).Compute(4).Type="ArrayTranslate"
Battery.Collect.Source(1).Compute(4).Column=4
Battery.Collect.Source(1).Compute(4).TranslationTable="DMTFOperationStatusInformationTranslationTable"
Battery.Collect.Source(1).Compute(4).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// FUJITSU_BTU,DeviceID,PATROLStatus,StatusInformation
Battery.Collect.Source(1).Compute(5).Type="Convert"
Battery.Collect.Source(1).Compute(5).Column=3
Battery.Collect.Source(1).Compute(5).ConversionType="Array2SimpleStatus"

// Let's associate the FUJITSU_BTU with the enclosure using the SubComponent to System table
// FUJITSU_BTU,DeviceID,PATROLStatus,StatusInformation,SUBCOMPONENT;SystemName;
Battery.Collect.Source(2).Type="TableJoint"
Battery.Collect.Source(2).LeftTable=%Battery.Collect.Source(1)%
Battery.Collect.Source(2).RightTable=%Enclosure.Discovery.Source(13)%
Battery.Collect.Source(2).LeftKeyColumn=1
Battery.Collect.Source(2).RightKeyColumn=1
Battery.Collect.Source(2).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Battery.Collect.Source(2).Compute(1).Type="KeepColumns"
Battery.Collect.Source(2).Compute(1).ColumnNumbers="2,3,4,6"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Battery.Collect.Source(2).Compute(2).Type="LeftConcat"
Battery.Collect.Source(2).Compute(2).Column=1
Battery.Collect.Source(2).Compute(2).String=":"

Battery.Collect.Source(2).Compute(3).Type="LeftConcat"
Battery.Collect.Source(2).Compute(3).Column=1
Battery.Collect.Source(2).Compute(3).String=Column(4)

// Source(3) = FUJITSU_BCU
// FUJITSU_BCU;DeviceID;OperationalStatus;
Battery.Collect.Source(3).Type="Wbem"
Battery.Collect.Source(3).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_BCU"
Battery.Collect.Source(3).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_BCU,DeviceID,OperationalStatus;
Battery.Collect.Source(3).Compute(1).Type="Replace"
Battery.Collect.Source(3).Compute(1).Column=2
Battery.Collect.Source(3).Compute(1).Replace="Battery Control Unit - "
Battery.Collect.Source(3).Compute(1).ReplaceBy="BatteryControlUnit-"

// Duplicate the "OperationalStatus" column
// FUJITSU_BCU,DeviceID,OperationalStatus
Battery.Collect.Source(3).Compute(2).Type="DuplicateColumn"
Battery.Collect.Source(3).Compute(2).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// FUJITSU_BCU,DeviceID,PATROLStatusArray,OperationalStatus
Battery.Collect.Source(3).Compute(3).Type="ArrayTranslate"
Battery.Collect.Source(3).Compute(3).Column=3
Battery.Collect.Source(3).Compute(3).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// FUJITSU_BCU,DeviceID,PATROLStatusArray,StatusInformation
Battery.Collect.Source(3).Compute(4).Type="ArrayTranslate"
Battery.Collect.Source(3).Compute(4).Column=4
Battery.Collect.Source(3).Compute(4).TranslationTable="DMTFOperationStatusInformationTranslationTable"
Battery.Collect.Source(3).Compute(4).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// FUJITSU_BCU,DeviceID,PATROLStatus,StatusInformation
Battery.Collect.Source(3).Compute(5).Type="Convert"
Battery.Collect.Source(3).Compute(5).Column=3
Battery.Collect.Source(3).Compute(5).ConversionType="Array2SimpleStatus"

// Let's associate the FUJITSU_BCU with the enclosure using the Component to System table
// FUJITSU_BCU,DeviceID,PATROLStatus,StatusInformation,COMPONENT;SystemName;
Battery.Collect.Source(4).Type="TableJoint"
Battery.Collect.Source(4).LeftTable=%Battery.Collect.Source(3)%
Battery.Collect.Source(4).RightTable=%Enclosure.Discovery.Source(11)%
Battery.Collect.Source(4).LeftKeyColumn=1
Battery.Collect.Source(4).RightKeyColumn=1
Battery.Collect.Source(4).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Battery.Collect.Source(4).Compute(1).Type="KeepColumns"
Battery.Collect.Source(4).Compute(1).ColumnNumbers="2,3,4,6"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Battery.Collect.Source(4).Compute(2).Type="LeftConcat"
Battery.Collect.Source(4).Compute(2).Column=1
Battery.Collect.Source(4).Compute(2).String=":"

Battery.Collect.Source(4).Compute(3).Type="LeftConcat"
Battery.Collect.Source(4).Compute(3).Column=1
Battery.Collect.Source(4).Compute(3).String=Column(4)

// Union BTU and BCU
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Battery.Collect.Source(5).Type="TableUnion"
Battery.Collect.Source(5).Table1=%Battery.Collect.Source(2)%
Battery.Collect.Source(5).Table2=%Battery.Collect.Source(4)%

// ValueTable = Source(1)
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Battery.Collect.ValueTable=%Battery.Collect.Source(5)%
Battery.Collect.DeviceID=ValueTable.Column(1)
Battery.Collect.Status=ValueTable.Column(2)
Battery.Collect.StatusInformation=ValueTable.Column(3)

//
//  Fans
//

//
// Discovery

// Source(1) = FUJITSU_PhysicalMemory
// FUJITSU_PhysicalMemory,DeviceID,Capacity,PartNumber
Memory.Discovery.Source(1).Type="WBEM"
Memory.Discovery.Source(1).WbemQuery="SELECT __PATH,ElementName,Capacity,PartNumber FROM FUJITSU_PhysicalMemory"
Memory.Discovery.Source(1).WbemNameSpace="root/eternus"

// Remove Controller Memory  - from the DeviceID
// FUJITSU_PhysicalMemory,DeviceID,Capacity,PartNumber
Memory.Discovery.Source(1).Compute(1).Type="Replace"
Memory.Discovery.Source(1).Compute(1).Column=2
Memory.Discovery.Source(1).Compute(1).Replace="Controller Memory - "
Memory.Discovery.Source(1).Compute(1).ReplaceBy=""

// Duplicate the DeviceID to make DeviceID and DisplayID
// FUJITSU_PhysicalMemory,DeviceID,DisplayID,Capacity,PartNumber
Memory.Discovery.Source(1).Compute(2).Type="DuplicateColumn"
Memory.Discovery.Source(1).Compute(2).Column=2

// Convert size to MB
// FUJITSU_PhysicalMemory,DeviceID,DisplayID,Capacity,PartNumber
Memory.Discovery.Source(1).Compute(3).Type="Divide"
Memory.Discovery.Source(1).Compute(3).Column=4
Memory.Discovery.Source(1).Compute(3).DivideBy="1048576"

// Let's associate the FUJITSU_PhysicalMemory with the Contoller using the Component to SubComponent table
// FUJITSU_PhysicalMemory,DeviceID,DisplayID,Capacity,PartNumber;CONTROLLER;FUJITSU_PhysicalMemory;
Memory.Discovery.Source(2).Type="TableJoint"
Memory.Discovery.Source(2).LeftTable=%Memory.Discovery.Source(1)%
Memory.Discovery.Source(2).RightTable=%Enclosure.Discovery.Source(12)%
Memory.Discovery.Source(2).LeftKeyColumn=1
Memory.Discovery.Source(2).RightKeyColumn=2
Memory.Discovery.Source(2).KeyType="Wbem"

// Let's associate the Contoller with the SYSTEM using the Component to SubComponent table
// FUJITSU_PhysicalMemory,DeviceID,DisplayID,Capacity,PartNumber;CONTROLLER;FUJITSU_PhysicalMemory;SYSTEM;CONTROLLER;
Memory.Discovery.Source(3).Type="TableJoint"
Memory.Discovery.Source(3).LeftTable=%Memory.Discovery.Source(2)%
Memory.Discovery.Source(3).RightTable=%Enclosure.Discovery.Source(12)%
Memory.Discovery.Source(3).LeftKeyColumn=6
Memory.Discovery.Source(3).RightKeyColumn=2
Memory.Discovery.Source(3).KeyType="Wbem"

// Let's associate the FUJITSU_PhysicalMemory with the enclosure using the SYSTEM to System table
// FUJITSU_PhysicalMemory,DeviceID,DisplayID,Capacity,PartNumber;CONTROLLER;FUJITSU_PhysicalMemory;SYSTEM;CONTROLLER;SYSTEM;SystemName;
Memory.Discovery.Source(4).Type="TableJoint"
Memory.Discovery.Source(4).LeftTable=%Memory.Discovery.Source(3)%
Memory.Discovery.Source(4).RightTable=%Enclosure.Discovery.Source(13)%
Memory.Discovery.Source(4).LeftKeyColumn=8
Memory.Discovery.Source(4).RightKeyColumn=1
Memory.Discovery.Source(4).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,DisplayID,Capacity,PartNumber,SystemName
Memory.Discovery.Source(4).Compute(1).Type="KeepColumns"
Memory.Discovery.Source(4).Compute(1).ColumnNumbers="2,3,4,5,11"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,DisplayID,Capacity,PartNumber,SystemName
Memory.Discovery.Source(4).Compute(2).Type="LeftConcat"
Memory.Discovery.Source(4).Compute(2).Column=1
Memory.Discovery.Source(4).Compute(2).String=":"

Memory.Discovery.Source(4).Compute(3).Type="LeftConcat"
Memory.Discovery.Source(4).Compute(3).Column=1
Memory.Discovery.Source(4).Compute(3).String=Column(5)

// Instance Table
// DeviceID,DisplayID,Capacity,PartNumber,SystemName
Memory.Discovery.InstanceTable=%Memory.Discovery.Source(4)%
Memory.Discovery.Instance.Size=InstanceTable.Column(3)
Memory.Discovery.Instance.DeviceID=InstanceTable.Column(1)
Memory.Discovery.Instance.Model=InstanceTable.Column(4)
Memory.Discovery.Instance.DisplayID=InstanceTable.Column(2)
Memory.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(5)

//
// Collect

// Collect type is multiinstance
Memory.Collect.Type="MultiInstance"

// Source(1) = FUJITSU_PhysicalMemory
// FUJITSU_PhysicalMemory;DeviceID;OperationalStatus;
Memory.Collect.Source(1).Type="Wbem"
Memory.Collect.Source(1).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_PhysicalMemory"
Memory.Collect.Source(1).WbemNameSpace="root/eternus"

// Remove Controller Memory  - from the DeviceID
// FUJITSU_PhysicalMemory,DeviceID,OperationalStatus;
Memory.Collect.Source(1).Compute(1).Type="Replace"
Memory.Collect.Source(1).Compute(1).Column=2
Memory.Collect.Source(1).Compute(1).Replace="Controller Memory - "
Memory.Collect.Source(1).Compute(1).ReplaceBy=""

// Duplicate the "OperationalStatus" column
// FUJITSU_PhysicalMemory,DeviceID,OperationalStatus
Memory.Collect.Source(1).Compute(2).Type="DuplicateColumn"
Memory.Collect.Source(1).Compute(2).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// FUJITSU_PhysicalMemory,DeviceID,PATROLStatusArray,OperationalStatus
Memory.Collect.Source(1).Compute(3).Type="ArrayTranslate"
Memory.Collect.Source(1).Compute(3).Column=3
Memory.Collect.Source(1).Compute(3).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// FUJITSU_PhysicalMemory,DeviceID,PATROLStatusArray,StatusInformation
Memory.Collect.Source(1).Compute(4).Type="ArrayTranslate"
Memory.Collect.Source(1).Compute(4).Column=4
Memory.Collect.Source(1).Compute(4).TranslationTable="DMTFOperationStatusInformationTranslationTable"
Memory.Collect.Source(1).Compute(4).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// FUJITSU_PhysicalMemory,DeviceID,PATROLStatus,StatusInformation
Memory.Collect.Source(1).Compute(5).Type="Convert"
Memory.Collect.Source(1).Compute(5).Column=3
Memory.Collect.Source(1).Compute(5).ConversionType="Array2SimpleStatus"

// Let's associate the FUJITSU_PhysicalMemory with the Contoller using the Component to SubComponent table
// FUJITSU_PhysicalMemory,DeviceID,PATROLStatus,StatusInformation;CONTROLLER;FUJITSU_PhysicalMemory;
Memory.Collect.Source(2).Type="TableJoint"
Memory.Collect.Source(2).LeftTable=%Memory.Collect.Source(1)%
Memory.Collect.Source(2).RightTable=%Enclosure.Discovery.Source(12)%
Memory.Collect.Source(2).LeftKeyColumn=1
Memory.Collect.Source(2).RightKeyColumn=2
Memory.Collect.Source(2).KeyType="Wbem"

// Let's associate the Contoller with the SYSTEM using the Component to SubComponent table
// FUJITSU_PhysicalMemory,DeviceID,PATROLStatus,StatusInformation;CONTROLLER;FUJITSU_PhysicalMemory;SYSTEM;CONTROLLER;
Memory.Collect.Source(3).Type="TableJoint"
Memory.Collect.Source(3).LeftTable=%Memory.Collect.Source(2)%
Memory.Collect.Source(3).RightTable=%Enclosure.Discovery.Source(12)%
Memory.Collect.Source(3).LeftKeyColumn=5
Memory.Collect.Source(3).RightKeyColumn=2
Memory.Collect.Source(3).KeyType="Wbem"

// Let's associate the FUJITSU_PhysicalMemory with the enclosure using the SYSTEM to System table
// FUJITSU_PhysicalMemory,DeviceID,PATROLStatus,StatusInformation;CONTROLLER;FUJITSU_PhysicalMemory;SYSTEM;CONTROLLER;SYSTEM;SystemName;
Memory.Collect.Source(4).Type="TableJoint"
Memory.Collect.Source(4).LeftTable=%Memory.Collect.Source(3)%
Memory.Collect.Source(4).RightTable=%Enclosure.Discovery.Source(13)%
Memory.Collect.Source(4).LeftKeyColumn=7
Memory.Collect.Source(4).RightKeyColumn=1
Memory.Collect.Source(4).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,PATROLStatus,StatusInformation;SystemName;
Memory.Collect.Source(4).Compute(1).Type="KeepColumns"
Memory.Collect.Source(4).Compute(1).ColumnNumbers="2,3,4,10"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Memory.Collect.Source(4).Compute(2).Type="LeftConcat"
Memory.Collect.Source(4).Compute(2).Column=1
Memory.Collect.Source(4).Compute(2).String=":"

Memory.Collect.Source(4).Compute(3).Type="LeftConcat"
Memory.Collect.Source(4).Compute(3).Column=1
Memory.Collect.Source(4).Compute(3).String=Column(4)

// ValueTable = Source(1)
// DeviceID,PATROLStatus,StatusInformation,SystemName;
Memory.Collect.ValueTable=%Memory.Collect.Source(4)%
Memory.Collect.DeviceID=ValueTable.Column(1)
Memory.Collect.Status=ValueTable.Column(2)
Memory.Collect.StatusInformation=ValueTable.Column(3)

//
//  OtherDevices
//

//
// Discovery

// COMPONENTS

// Source(1) = FUJITSU_IOM
// FUJITSU_IOM,DeviceID
OtherDevice.Discovery.Source(1).Type="WBEM"
OtherDevice.Discovery.Source(1).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_IOM"
OtherDevice.Discovery.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_IOM,DeviceID
OtherDevice.Discovery.Source(1).Compute(1).Type="Replace"
OtherDevice.Discovery.Source(1).Compute(1).Column=2
OtherDevice.Discovery.Source(1).Compute(1).Replace="I/O Module - "
OtherDevice.Discovery.Source(1).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_IOM,DeviceID
OtherDevice.Discovery.Source(1).Compute(2).Type="LeftConcat"
OtherDevice.Discovery.Source(1).Compute(2).Column=1
OtherDevice.Discovery.Source(1).Compute(2).String="IO Module;"

// Source(2) = FUJITSU_ChannelAdapterCard
// FUJITSU_ChannelAdapterCard,DeviceID
OtherDevice.Discovery.Source(2).Type="WBEM"
OtherDevice.Discovery.Source(2).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_ChannelAdapterCard"
OtherDevice.Discovery.Source(2).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_ChannelAdapterCard,DeviceID
OtherDevice.Discovery.Source(2).Compute(1).Type="Replace"
OtherDevice.Discovery.Source(2).Compute(1).Column=2
OtherDevice.Discovery.Source(2).Compute(1).Replace="Channel Adapter Card - "
OtherDevice.Discovery.Source(2).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_ChannelAdapterCard,DeviceID
OtherDevice.Discovery.Source(2).Compute(2).Type="LeftConcat"
OtherDevice.Discovery.Source(2).Compute(2).Column=1
OtherDevice.Discovery.Source(2).Compute(2).String="ChannelAdapterCard;"

// Source(3) = FUJITSU_ControllerCard
// FUJITSU_ControllerCard,DeviceID
OtherDevice.Discovery.Source(3).Type="WBEM"
OtherDevice.Discovery.Source(3).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_ControllerCard"
OtherDevice.Discovery.Source(3).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_ControllerCard,DeviceID
OtherDevice.Discovery.Source(3).Compute(1).Type="Replace"
OtherDevice.Discovery.Source(3).Compute(1).Column=2
OtherDevice.Discovery.Source(3).Compute(1).Replace="Controller Card - "
OtherDevice.Discovery.Source(3).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_ControllerCard,DeviceID
OtherDevice.Discovery.Source(3).Compute(2).Type="LeftConcat"
OtherDevice.Discovery.Source(3).Compute(2).Column=1
OtherDevice.Discovery.Source(3).Compute(2).String="ControllerCard;"

// Union all the components together
// Type;COMPONENT,DeviceID
OtherDevice.Discovery.Source(4).Type="TableUnion"
OtherDevice.Discovery.Source(4).Table1=%OtherDevice.Discovery.Source(1)%
OtherDevice.Discovery.Source(4).Table2=%OtherDevice.Discovery.Source(2)%
OtherDevice.Discovery.Source(4).Table3=%OtherDevice.Discovery.Source(3)%

// Duplicate the DeviceID to get DisplayID
// Type;COMPONENT;DeviceID;DisplayID;
OtherDevice.Discovery.Source(4).Compute(1).Type="DuplicateColumn"
OtherDevice.Discovery.Source(4).Compute(1).Column=3

// Let's associate the FUJITSU_FAN with the enclosure using the SubComponent to System table
// Type;COMPONENT,DeviceID,DisplayID,COMPONENT;SystemName;
OtherDevice.Discovery.Source(5).Type="TableJoint"
OtherDevice.Discovery.Source(5).LeftTable=%OtherDevice.Discovery.Source(4)%
OtherDevice.Discovery.Source(5).RightTable=%Enclosure.Discovery.Source(11)%
OtherDevice.Discovery.Source(5).LeftKeyColumn=2
OtherDevice.Discovery.Source(5).RightKeyColumn=1
OtherDevice.Discovery.Source(5).KeyType="Wbem"

// Get rid of the Paths
// Type,DeviceID,DisplayID,SystemName
OtherDevice.Discovery.Source(5).Compute(1).Type="KeepColumns"
OtherDevice.Discovery.Source(5).Compute(1).ColumnNumbers="1,3,4,6"

// Add ":" And SystemName to DeviceID to make ID unique
// Type,DeviceID,DisplayID,SystemName
OtherDevice.Discovery.Source(5).Compute(2).Type="LeftConcat"
OtherDevice.Discovery.Source(5).Compute(2).Column=2
OtherDevice.Discovery.Source(5).Compute(2).String=":"

OtherDevice.Discovery.Source(5).Compute(3).Type="LeftConcat"
OtherDevice.Discovery.Source(5).Compute(3).Column=2
OtherDevice.Discovery.Source(5).Compute(3).String=Column(4)

// SUB-COMPONENTS

// Source(1) = FUJITSU_ChannelAdapterCard
// FUJITSU_ChannelAdapterCard,DeviceID
OtherDevice.Discovery.Source(6).Type="WBEM"
OtherDevice.Discovery.Source(6).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_ChannelAdapterCard"
OtherDevice.Discovery.Source(6).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_ChannelAdapterCard,DeviceID
OtherDevice.Discovery.Source(6).Compute(1).Type="Replace"
OtherDevice.Discovery.Source(6).Compute(1).Column=2
OtherDevice.Discovery.Source(6).Compute(1).Replace="Channel Adapter Card - "
OtherDevice.Discovery.Source(6).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_ChannelAdapterCard,DeviceID
OtherDevice.Discovery.Source(6).Compute(2).Type="LeftConcat"
OtherDevice.Discovery.Source(6).Compute(2).Column=1
OtherDevice.Discovery.Source(6).Compute(2).String="ChannelAdapterCard;"

// Duplicate the DeviceID to make DeviceID and DisplayID
// Type;FUJITSU_ChannelAdapterCard,DeviceID,DisplayID
OtherDevice.Discovery.Source(6).Compute(3).Type="DuplicateColumn"
OtherDevice.Discovery.Source(6).Compute(3).Column=3

// Let's associate the FUJITSU_ChannelAdapterCard with the enclosure using the SubComponent to System table
// Type;FUJITSU_ChannelAdapterCard,DeviceID,DisplayID,SUBCOMPONENT;SystemName;
OtherDevice.Discovery.Source(7).Type="TableJoint"
OtherDevice.Discovery.Source(7).LeftTable=%OtherDevice.Discovery.Source(6)%
OtherDevice.Discovery.Source(7).RightTable=%Enclosure.Discovery.Source(13)%
OtherDevice.Discovery.Source(7).LeftKeyColumn=2
OtherDevice.Discovery.Source(7).RightKeyColumn=1
OtherDevice.Discovery.Source(7).KeyType="Wbem"

// Get rid of the Paths
// Type;DeviceID,DisplayID,SystemName
OtherDevice.Discovery.Source(7).Compute(1).Type="KeepColumns"
OtherDevice.Discovery.Source(7).Compute(1).ColumnNumbers="1,3,4,6"

// Add ":" And SystemaName to DeviceID to make ID unique
// Type;DeviceID,DisplayID,SystemName
OtherDevice.Discovery.Source(7).Compute(2).Type="LeftConcat"
OtherDevice.Discovery.Source(7).Compute(2).Column=2
OtherDevice.Discovery.Source(7).Compute(2).String=":"

OtherDevice.Discovery.Source(7).Compute(3).Type="LeftConcat"
OtherDevice.Discovery.Source(7).Compute(3).Column=2
OtherDevice.Discovery.Source(7).Compute(3).String=Column(4)

// Join the Components and SubComponents together
OtherDevice.Discovery.Source(8).Type="TableUnion"
OtherDevice.Discovery.Source(8).Table1=%OtherDevice.Discovery.Source(5)%
OtherDevice.Discovery.Source(8).Table2=%OtherDevice.Discovery.Source(7)%

// Instance Table
// Type;DeviceID,DisplayID,SystemName
OtherDevice.Discovery.InstanceTable=%OtherDevice.Discovery.Source(8)%
OtherDevice.Discovery.Instance.DeviceID=InstanceTable.Column(2)
OtherDevice.Discovery.Instance.DisplayID=InstanceTable.Column(3)
OtherDevice.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(4)
OtherDevice.Discovery.Instance.DeviceType=InstanceTable.Column(1)

//
// Collect

// Collect type is multiinstance
OtherDevice.Collect.Type="MultiInstance"

// COMPONENTS

// Source(1) = FUJITSU_IOM
// FUJITSU_IOM,DeviceID
OtherDevice.Collect.Source(1).Type="WBEM"
OtherDevice.Collect.Source(1).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_IOM"
OtherDevice.Collect.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_IOM,DeviceID,OperationalStatus
OtherDevice.Collect.Source(1).Compute(1).Type="Replace"
OtherDevice.Collect.Source(1).Compute(1).Column=2
OtherDevice.Collect.Source(1).Compute(1).Replace="I/O Module - "
OtherDevice.Collect.Source(1).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_IOM,DeviceID,OperationalStatus
OtherDevice.Collect.Source(1).Compute(2).Type="LeftConcat"
OtherDevice.Collect.Source(1).Compute(2).Column=1
OtherDevice.Collect.Source(1).Compute(2).String="IO Module;"

// Source(2) = FUJITSU_ChannelAdapterCard
// FUJITSU_ChannelAdapterCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(2).Type="WBEM"
OtherDevice.Collect.Source(2).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_ChannelAdapterCard"
OtherDevice.Collect.Source(2).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_ChannelAdapterCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(2).Compute(1).Type="Replace"
OtherDevice.Collect.Source(2).Compute(1).Column=2
OtherDevice.Collect.Source(2).Compute(1).Replace="Channel Adapter Card - "
OtherDevice.Collect.Source(2).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_ChannelAdapterCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(2).Compute(2).Type="LeftConcat"
OtherDevice.Collect.Source(2).Compute(2).Column=1
OtherDevice.Collect.Source(2).Compute(2).String="ChannelAdapterCard;"

// Source(3) = FUJITSU_ControllerCard
// FUJITSU_ControllerCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(3).Type="WBEM"
OtherDevice.Collect.Source(3).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_ControllerCard"
OtherDevice.Collect.Source(3).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_ControllerCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(3).Compute(1).Type="Replace"
OtherDevice.Collect.Source(3).Compute(1).Column=2
OtherDevice.Collect.Source(3).Compute(1).Replace="Controller Card - "
OtherDevice.Collect.Source(3).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_ControllerCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(3).Compute(2).Type="LeftConcat"
OtherDevice.Collect.Source(3).Compute(2).Column=1
OtherDevice.Collect.Source(3).Compute(2).String="ControllerCard;"

// Union all the components together
// Type;COMPONENT,DeviceID,OperationalStatus
OtherDevice.Collect.Source(4).Type="TableUnion"
OtherDevice.Collect.Source(4).Table1=%OtherDevice.Collect.Source(1)%
OtherDevice.Collect.Source(4).Table2=%OtherDevice.Collect.Source(2)%
OtherDevice.Collect.Source(4).Table3=%OtherDevice.Collect.Source(3)%

// Duplicate the DeviceID to get DisplayID
// Type;COMPONENT;DeviceID;DisplayID;OperationalStatus
OtherDevice.Collect.Source(4).Compute(1).Type="DuplicateColumn"
OtherDevice.Collect.Source(4).Compute(1).Column=3

// Let's associate the FUJITSU_FAN with the enclosure using the SubComponent to System table
// Type;COMPONENT,DeviceID,DisplayID,OperationalStatus,COMPONENT;SystemName;
OtherDevice.Collect.Source(5).Type="TableJoint"
OtherDevice.Collect.Source(5).LeftTable=%OtherDevice.Collect.Source(4)%
OtherDevice.Collect.Source(5).RightTable=%Enclosure.Discovery.Source(11)%
OtherDevice.Collect.Source(5).LeftKeyColumn=2
OtherDevice.Collect.Source(5).RightKeyColumn=1
OtherDevice.Collect.Source(5).KeyType="Wbem"

// Get rid of the Paths
// Type,DeviceID,DisplayID,OperationalStatus,SystemName
OtherDevice.Collect.Source(5).Compute(1).Type="KeepColumns"
OtherDevice.Collect.Source(5).Compute(1).ColumnNumbers="1,3,4,5,7"

// Add ":" And SystemName to DeviceID to make ID unique
// Type,DeviceID,DisplayID,OperationalStatus,SystemName
OtherDevice.Collect.Source(5).Compute(2).Type="LeftConcat"
OtherDevice.Collect.Source(5).Compute(2).Column=2
OtherDevice.Collect.Source(5).Compute(2).String=":"

OtherDevice.Collect.Source(5).Compute(3).Type="LeftConcat"
OtherDevice.Collect.Source(5).Compute(3).Column=2
OtherDevice.Collect.Source(5).Compute(3).String=Column(5)

// SUB-COMPONENTS

// Source(1) = FUJITSU_ChannelAdapterCard
// FUJITSU_ChannelAdapterCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(6).Type="WBEM"
OtherDevice.Collect.Source(6).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_ChannelAdapterCard"
OtherDevice.Collect.Source(6).WbemNameSpace="root/eternus"

// Remove Channel Adapter Card - from the DeviceID
// FUJITSU_ChannelAdapterCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(6).Compute(1).Type="Replace"
OtherDevice.Collect.Source(6).Compute(1).Column=2
OtherDevice.Collect.Source(6).Compute(1).Replace="Channel Adapter Card - "
OtherDevice.Collect.Source(6).Compute(1).ReplaceBy=""

// Add device Type
// Type;FUJITSU_ChannelAdapterCard,DeviceID,OperationalStatus
OtherDevice.Collect.Source(6).Compute(2).Type="LeftConcat"
OtherDevice.Collect.Source(6).Compute(2).Column=1
OtherDevice.Collect.Source(6).Compute(2).String="ChannelAdapterCard;"

// Duplicate the DeviceID to make DeviceID and DisplayID
// Type;FUJITSU_ChannelAdapterCard,DeviceID,DisplayID,OperationalStatus
OtherDevice.Collect.Source(6).Compute(3).Type="DuplicateColumn"
OtherDevice.Collect.Source(6).Compute(3).Column=3

// Let's associate the FUJITSU_FAN with the enclosure using the SubComponent to System table
// Type;FUJITSU_ChannelAdapterCard,DeviceID,DisplayID,OperationalStatus,SUBCOMPONENT;SystemName;
OtherDevice.Collect.Source(7).Type="TableJoint"
OtherDevice.Collect.Source(7).LeftTable=%OtherDevice.Collect.Source(6)%
OtherDevice.Collect.Source(7).RightTable=%Enclosure.Discovery.Source(13)%
OtherDevice.Collect.Source(7).LeftKeyColumn=2
OtherDevice.Collect.Source(7).RightKeyColumn=1
OtherDevice.Collect.Source(7).KeyType="Wbem"

// Get rid of the Paths
// Type;DeviceID,DisplayID,OperationalStatus,SystemName
OtherDevice.Collect.Source(7).Compute(1).Type="KeepColumns"
OtherDevice.Collect.Source(7).Compute(1).ColumnNumbers="1,3,4,5,7"

// Add ":" And SystemaName to DeviceID to make ID unique
// Type;DeviceID,DisplayID,OperationalStatus,SystemName
OtherDevice.Collect.Source(7).Compute(2).Type="LeftConcat"
OtherDevice.Collect.Source(7).Compute(2).Column=2
OtherDevice.Collect.Source(7).Compute(2).String=":"

OtherDevice.Collect.Source(7).Compute(3).Type="LeftConcat"
OtherDevice.Collect.Source(7).Compute(3).Column=2
OtherDevice.Collect.Source(7).Compute(3).String=Column(4)

// Join the Components and SubComponents together
// Type;DeviceID,DisplayID,OperationalStatus,SystemName
OtherDevice.Collect.Source(8).Type="TableUnion"
OtherDevice.Collect.Source(8).Table1=%OtherDevice.Collect.Source(5)%
OtherDevice.Collect.Source(8).Table2=%OtherDevice.Collect.Source(7)%

// Now let's translate the Operational Status

// Duplicate the "OperationalStatus" column
// Type;DeviceID,DisplayID,OperationalStatus,OperationalStatus,SystemName
OtherDevice.Collect.Source(8).Compute(1).Type="DuplicateColumn"
OtherDevice.Collect.Source(8).Compute(1).Column=4

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// Type;DeviceID,DisplayID,PATROLStatusArray,OperationalStatus,SystemName
OtherDevice.Collect.Source(8).Compute(2).Type="ArrayTranslate"
OtherDevice.Collect.Source(8).Compute(2).Column=4
OtherDevice.Collect.Source(8).Compute(2).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// Type;DeviceID,DisplayID,PATROLStatusArray,StatusInformation,SystemName
OtherDevice.Collect.Source(8).Compute(3).Type="ArrayTranslate"
OtherDevice.Collect.Source(8).Compute(3).Column=5
OtherDevice.Collect.Source(8).Compute(3).TranslationTable="DMTFOperationStatusInformationTranslationTable"
OtherDevice.Collect.Source(8).Compute(3).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// Type;DeviceID,DisplayID,PATROLStatus,StatusInformation,SystemName
OtherDevice.Collect.Source(8).Compute(4).Type="Convert"
OtherDevice.Collect.Source(8).Compute(4).Column=4
OtherDevice.Collect.Source(8).Compute(4).ConversionType="Array2SimpleStatus"

// ValueTable = Source(1)
// Type;DeviceID,DisplayID,PATROLStatus,StatusInformation,SystemName
OtherDevice.Collect.ValueTable=%OtherDevice.Collect.Source(8)%
OtherDevice.Collect.DeviceID=ValueTable.Column(2)
OtherDevice.Collect.Status=ValueTable.Column(4)
OtherDevice.Collect.StatusInformation=ValueTable.Column(5)

//
//  PowerSupply
//

//
// Discovery

// Source(1) = FUJITSU_PSU
// FUJITSU_PSU,DeviceID
PowerSupply.Discovery.Source(1).Type="WBEM"
PowerSupply.Discovery.Source(1).WbemQuery="SELECT __PATH,ElementName FROM FUJITSU_PSU"
PowerSupply.Discovery.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_PSU,DeviceID
PowerSupply.Discovery.Source(1).Compute(1).Type="Replace"
PowerSupply.Discovery.Source(1).Compute(1).Column=2
PowerSupply.Discovery.Source(1).Compute(1).Replace="Power Supply Unit - "
PowerSupply.Discovery.Source(1).Compute(1).ReplaceBy=""

// Duplicate the DeviceID to make DeviceID and DisplayID
// FUJITSU_PSU,DeviceID,DisplayID
PowerSupply.Discovery.Source(1).Compute(2).Type="DuplicateColumn"
PowerSupply.Discovery.Source(1).Compute(2).Column=2

// Let's associate the FUJITSU_PSU with the enclosure using the Component to System table
// FUJITSU_PSU,DeviceID,DisplayID,COMPONENT;SystemName;
PowerSupply.Discovery.Source(2).Type="TableJoint"
PowerSupply.Discovery.Source(2).LeftTable=%PowerSupply.Discovery.Source(1)%
PowerSupply.Discovery.Source(2).RightTable=%Enclosure.Discovery.Source(11)%
PowerSupply.Discovery.Source(2).LeftKeyColumn=1
PowerSupply.Discovery.Source(2).RightKeyColumn=1
PowerSupply.Discovery.Source(2).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,DisplayID,SystemName
PowerSupply.Discovery.Source(2).Compute(1).Type="KeepColumns"
PowerSupply.Discovery.Source(2).Compute(1).ColumnNumbers="2,3,5"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,DisplayID,SystemName
PowerSupply.Discovery.Source(2).Compute(2).Type="LeftConcat"
PowerSupply.Discovery.Source(2).Compute(2).Column=1
PowerSupply.Discovery.Source(2).Compute(2).String=":"

PowerSupply.Discovery.Source(2).Compute(3).Type="LeftConcat"
PowerSupply.Discovery.Source(2).Compute(3).Column=1
PowerSupply.Discovery.Source(2).Compute(3).String=Column(3)

// Instance Table
// DeviceID,DisplayID,SystemName
PowerSupply.Discovery.InstanceTable=%PowerSupply.Discovery.Source(2)%
PowerSupply.Discovery.Instance.DeviceID=InstanceTable.Column(1)
PowerSupply.Discovery.Instance.DisplayID=InstanceTable.Column(2)
PowerSupply.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(3)

//
// Collect

// Collect type is multiinstance
PowerSupply.Collect.Type="MultiInstance"

// Source(1) = FUJITSU_PSU
// FUJITSU_PSU;DeviceID;OperationalStatus;
PowerSupply.Collect.Source(1).Type="Wbem"
PowerSupply.Collect.Source(1).WbemQuery="SELECT __PATH,ElementName,OperationalStatus FROM FUJITSU_PSU"
PowerSupply.Collect.Source(1).WbemNameSpace="root/eternus"

// Remove Fan - from the DeviceID
// FUJITSU_PSU,DeviceID,OperationalStatus;
PowerSupply.Collect.Source(1).Compute(1).Type="Replace"
PowerSupply.Collect.Source(1).Compute(1).Column=2
PowerSupply.Collect.Source(1).Compute(1).Replace="Power Supply Unit - "
PowerSupply.Collect.Source(1).Compute(1).ReplaceBy=""

// Duplicate the "OperationalStatus" column
// FUJITSU_PSU,DeviceID,OperationalStatus
PowerSupply.Collect.Source(1).Compute(2).Type="DuplicateColumn"
PowerSupply.Collect.Source(1).Compute(2).Column=3

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// FUJITSU_PSU,DeviceID,PATROLStatusArray,OperationalStatus
PowerSupply.Collect.Source(1).Compute(3).Type="ArrayTranslate"
PowerSupply.Collect.Source(1).Compute(3).Column=3
PowerSupply.Collect.Source(1).Compute(3).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// FUJITSU_PSU,DeviceID,PATROLStatusArray,StatusInformation
PowerSupply.Collect.Source(1).Compute(4).Type="ArrayTranslate"
PowerSupply.Collect.Source(1).Compute(4).Column=4
PowerSupply.Collect.Source(1).Compute(4).TranslationTable="DMTFOperationStatusInformationTranslationTable"
PowerSupply.Collect.Source(1).Compute(4).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// FUJITSU_PSU,DeviceID,PATROLStatus,StatusInformation
PowerSupply.Collect.Source(1).Compute(5).Type="Convert"
PowerSupply.Collect.Source(1).Compute(5).Column=3
PowerSupply.Collect.Source(1).Compute(5).ConversionType="Array2SimpleStatus"

// Let's associate the FUJITSU_FAN with the enclosure using the Component to System table
// FUJITSU_PSU,DeviceID,PATROLStatus,StatusInformation,COMPONENT;SystemName;
PowerSupply.Collect.Source(2).Type="TableJoint"
PowerSupply.Collect.Source(2).LeftTable=%PowerSupply.Collect.Source(1)%
PowerSupply.Collect.Source(2).RightTable=%Enclosure.Discovery.Source(11)%
PowerSupply.Collect.Source(2).LeftKeyColumn=1
PowerSupply.Collect.Source(2).RightKeyColumn=1
PowerSupply.Collect.Source(2).KeyType="Wbem"

// Get rid of the Paths
// DeviceID,PATROLStatus,StatusInformation,SystemName;
PowerSupply.Collect.Source(2).Compute(1).Type="KeepColumns"
PowerSupply.Collect.Source(2).Compute(1).ColumnNumbers="2,3,4,6"

// Add ":" And SystemaName to DeviceID to make ID unique
// DeviceID,PATROLStatus,StatusInformation,SystemName;
PowerSupply.Collect.Source(2).Compute(2).Type="LeftConcat"
PowerSupply.Collect.Source(2).Compute(2).Column=1
PowerSupply.Collect.Source(2).Compute(2).String=":"

PowerSupply.Collect.Source(2).Compute(3).Type="LeftConcat"
PowerSupply.Collect.Source(2).Compute(3).Column=1
PowerSupply.Collect.Source(2).Compute(3).String=Column(4)

// ValueTable = Source(1)
// DeviceID,PATROLStatus,StatusInformation,SystemName;
PowerSupply.Collect.ValueTable=%PowerSupply.Collect.Source(2)%
PowerSupply.Collect.DeviceID=ValueTable.Column(1)
PowerSupply.Collect.Status=ValueTable.Column(2)
PowerSupply.Collect.StatusInformation=ValueTable.Column(3)

//
// Logical disks
//

//
// Discovery


// Source(1) = FUJITSU_StorageVolume
// ElementName,NumberOfBlocks,BlockSize,SystemID,RaidLevel
LogicalDisk.Discovery.Source(1).Type="WBEM"
LogicalDisk.Discovery.Source(1).WbemQuery="SELECT ElementName,NumberOfBlocks,BlockSize,SystemName,RaidLevel FROM FUJITSU_StorageVolume"
LogicalDisk.Discovery.Source(1).WbemNameSpace="root/eternus"

// Compute the real size of the volumes (SizeInBlocks * BlockSize)
// ElementName,SizeBytes,BlockSize,SystemID,RaidLevel
LogicalDisk.Discovery.Source(1).Compute(1).Type="Multiply"
LogicalDisk.Discovery.Source(1).Compute(1).Column=2
LogicalDisk.Discovery.Source(1).Compute(1).MultiplyBy=Column(3)

//  We need to align the colums for Union later
// From
// ElementName,SizeBytes,BlockSize,SystemID,RaidLevel
// To
// ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel

// Get rid of BlockSize
// ElementName,SizeBytes,SystemID,RaidLevel
LogicalDisk.Discovery.Source(1).Compute(2).Type="KeepColumns"
LogicalDisk.Discovery.Source(1).Compute(2).ColumnNumbers="1,2,4,5"

// Add RemainingManagedSpace,IncludeInCapacityReport,Type
// ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
LogicalDisk.Discovery.Source(1).Compute(3).Type="RightConcat"
LogicalDisk.Discovery.Source(1).Compute(3).Column=2
LogicalDisk.Discovery.Source(1).Compute(3).String=";;1;Volume"

// Source(2) = CIM_StoragePool
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,__PATH
LogicalDisk.Discovery.Source(2).Type="WBEM"
LogicalDisk.Discovery.Source(2).WbemQuery="SELECT __PATH,ElementName,TotalManagedSpace,RemainingManagedSpace,__PATH FROM CIM_StoragePool"
LogicalDisk.Discovery.Source(2).WbemNameSpace="root/eternus"

// Extract the Creation Class from the PATH
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,CreationClassName
LogicalDisk.Discovery.Source(2).Compute(1).Type="Extract"
LogicalDisk.Discovery.Source(2).Compute(1).Column=5
LogicalDisk.Discovery.Source(2).Compute(1).SubColumn=1
LogicalDisk.Discovery.Source(2).Compute(1).SubSeparators="."


// Do not take into account the storage pools when counting the total logical disk size
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type
LogicalDisk.Discovery.Source(2).Compute(2).Type="Translate"
LogicalDisk.Discovery.Source(2).Compute(2).Column=5
LogicalDisk.Discovery.Source(2).Compute(2).TranslationTable="CreationClassNameStoragePoolTranslationTable"

// The PrimordialStoragePoolTranslationTable
CreationClassNameStoragePoolTranslationTable("FUJITSU_PrimordialStoragePool")="0;Primordial Storage Pool"
CreationClassNameStoragePoolTranslationTable("FUJITSU_FlexibleTierPool")="0;Flexible Tier Pool"
CreationClassNameStoragePoolTranslationTable("FUJITSU_FlexibleTierSubPool")="0;Flexible Tier Sub Pool"
CreationClassNameStoragePoolTranslationTable("FUJITSU_ThinProvisioningPool")="0;Thin Provisioning Pool"
CreationClassNameStoragePoolTranslationTable("FUJITSU_RAIDStoragePool")="0;RAID Storage Pool"
CreationClassNameStoragePoolTranslationTable("FUJITSU_SDPVPool")="0;SDPV Pool"
CreationClassNameStoragePoolTranslationTable("FUJITSU_SnapDataPool")="0;Snap Data Pool"
CreationClassNameStoragePoolTranslationTable(Default)="0;Storage Pool"

// Association Pool to Storage System
// CIM_StoragePool,FUJITSU_StorageComputerSystem
LogicalDisk.Discovery.Source(3).Type="WBEM"
LogicalDisk.Discovery.Source(3).WbemQuery="SELECT PartComponent,GroupComponent FROM cim_hostedstoragepool"
LogicalDisk.Discovery.Source(3).WbemNameSpace="root/eternus"

// Attach the Pool to the Association Table
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,CIM_StoragePool,FUJITSU_StorageComputerSystem
LogicalDisk.Discovery.Source(4).Type="TableJoint"
LogicalDisk.Discovery.Source(4).LeftTable=%LogicalDisk.Discovery.Source(2)%
LogicalDisk.Discovery.Source(4).RightTable=%LogicalDisk.Discovery.Source(3)%
LogicalDisk.Discovery.Source(4).LeftKeyColumn=1
LogicalDisk.Discovery.Source(4).RightKeyColumn=1
LogicalDisk.Discovery.Source(4).KeyType="Wbem"

// Attach the above table to the enclosure discovery
//         1           2           3             4                 5                    6           7           8                               9                         10       11
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,CIM_StoragePool,FUJITSU_StorageComputerSystem;FUJITSU_StorageComputerSystem;SystemID;SystemName;
LogicalDisk.Discovery.Source(5).Type="TableJoint"
LogicalDisk.Discovery.Source(5).LeftTable=%LogicalDisk.Discovery.Source(4)%
LogicalDisk.Discovery.Source(5).RightTable=%Enclosure.Discovery.Source(1)%
LogicalDisk.Discovery.Source(5).LeftKeyColumn=8
LogicalDisk.Discovery.Source(5).RightKeyColumn=1
LogicalDisk.Discovery.Source(5).KeyType="Wbem"

// Make a copy of Discovery Source  for use in Collect
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,CIM_StoragePool,FUJITSU_StorageComputerSystem;FUJITSU_StorageComputerSystem;SystemID;SystemName;
LogicalDisk.Discovery.Source(6)=%LogicalDisk.Discovery.Source(5)%

// Get CIM_Storagepool to System ID for use in Collect
// CIM_StoragePool,SystemID
LogicalDisk.Discovery.Source(6).Compute(1).Type="KeepColumns"
LogicalDisk.Discovery.Source(6).Compute(1).ColumnNumbers="1,10"

// Now Another Copy for use by Discovery
// CIM_StoragePool,ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,CIM_StoragePool,FUJITSU_StorageComputerSystem;FUJITSU_StorageComputerSystem;SystemID;SystemName;
LogicalDisk.Discovery.Source(7)=%LogicalDisk.Discovery.Source(5)%

// Get rid of the Paths
// ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID
LogicalDisk.Discovery.Source(7).Compute(1).Type="KeepColumns"
LogicalDisk.Discovery.Source(7).Compute(1).ColumnNumbers="2,3,4,5,6,10"

// Add a blank RaidLevel Column
// ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
LogicalDisk.Discovery.Source(7).Compute(2).Type="RightConcat"
LogicalDisk.Discovery.Source(7).Compute(2).Column=6
LogicalDisk.Discovery.Source(7).Compute(2).String=";"

// Union of Volumes and Pools
// ElementName,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
LogicalDisk.Discovery.Source(8).Type="TableUnion"
LogicalDisk.Discovery.Source(8).Table1=%LogicalDisk.Discovery.Source(1)%
LogicalDisk.Discovery.Source(8).Table2=%LogicalDisk.Discovery.Source(7)%

// Duplicate the DeviceID to allow a DisplayID
// DeviceID,DisplayID,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
LogicalDisk.Discovery.Source(8).Compute(1).Type="DuplicateColumn"
LogicalDisk.Discovery.Source(8).Compute(1).Column=1

// Add ":" And SystemaName to Caption to make DeviceID unique
// DeviceID,DisplayID,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
LogicalDisk.Discovery.Source(8).Compute(2).Type="LeftConcat"
LogicalDisk.Discovery.Source(8).Compute(2).Column=1
LogicalDisk.Discovery.Source(8).Compute(2).String=":"

LogicalDisk.Discovery.Source(8).Compute(3).Type="LeftConcat"
LogicalDisk.Discovery.Source(8).Compute(3).Column=1
LogicalDisk.Discovery.Source(8).Compute(3).String=Column(7)

// Instance Table
// DeviceID,DisplayID,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
LogicalDisk.Discovery.InstanceTable=%LogicalDisk.Discovery.Source(8)%
LogicalDisk.Discovery.Instance.DeviceID=InstanceTable.Column(1)
LogicalDisk.Discovery.Instance.DisplayID=InstanceTable.Column(2)
LogicalDisk.Discovery.Instance.Size=InstanceTable.Column(3)
LogicalDisk.Discovery.Instance.RaidLevel=InstanceTable.Column(8)
LogicalDisk.Discovery.Instance.UseForCapacityReport=InstanceTable.Column(5)
LogicalDisk.Discovery.Instance.ParameterActivation.UnallocatedSpace=InstanceTable.Column(4)
LogicalDisk.Discovery.Instance.LogicalDiskType=InstanceTable.Column(6)
LogicalDisk.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(7)
LogicalDisk.Discovery.Instance.AttachedToDeviceType="Enclosure"
// LogicalDisk.Discovery.Instance.AdditionalInformation2=InstanceTable.Column(13)



//
// Collect
//
// Reusing alot of the discovery code to keep it simple


// Collect type is multiinstance
LogicalDisk.Collect.Type="MultiInstance"

// Source(1) = FUJITSU_StorageVolume
// ElementName,OperationalStatus,SystemID
LogicalDisk.Collect.Source(1).Type="WBEM"
LogicalDisk.Collect.Source(1).WbemQuery="SELECT ElementName,OperationalStatus,SystemName FROM FUJITSU_StorageVolume"
LogicalDisk.Collect.Source(1).WbemNameSpace="root/eternus"

// Add a blank RemainingManagedSpace
// ElementName,OperationalStatus,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(1).Compute(1).Type="LeftConcat"
LogicalDisk.Collect.Source(1).Compute(1).Column=3
LogicalDisk.Collect.Source(1).Compute(1).String=";"

// Source(2) = FUJITSU_RAIDStoragePool
// ElementName,OperationalStatus,RemainingManagedSpace,CIM_StoragePool
LogicalDisk.Collect.Source(2).Type="WBEM"
LogicalDisk.Collect.Source(2).WbemQuery="SELECT ElementName,OperationalStatus,RemainingManagedSpace,__PATH FROM CIM_StoragePool"
LogicalDisk.Collect.Source(2).WbemNameSpace="root/eternus"

// Attach the Pool to the Association Table
// ElementName,OperationalStatus,RemainingManagedSpace,CIM_StoragePool,CIM_StoragePool,SystemID
LogicalDisk.Collect.Source(3).Type="TableJoint"
LogicalDisk.Collect.Source(3).LeftTable=%LogicalDisk.Collect.Source(2)%
LogicalDisk.Collect.Source(3).RightTable=%LogicalDisk.Discovery.Source(6)%
LogicalDisk.Collect.Source(3).LeftKeyColumn=4
LogicalDisk.Collect.Source(3).RightKeyColumn=1
LogicalDisk.Collect.Source(3).KeyType="Wbem"

// Trim Columns
// ElementName,OperationalStatus,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(3).Compute(1).Type="KeepColumns"
LogicalDisk.Collect.Source(3).Compute(1).ColumnNumbers="1,2,3,6"

// Union of Volumes and Pools
// ElementName,OperationalStatus,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(4).Type="TableUnion"
LogicalDisk.Collect.Source(4).Table1=%LogicalDisk.Collect.Source(1)%
LogicalDisk.Collect.Source(4).Table2=%LogicalDisk.Collect.Source(3)%

// Add ":" And SystemaName to Caption to make DeviceID unique
// ElementName,OperationalStatus,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(4).Compute(1).Type="LeftConcat"
LogicalDisk.Collect.Source(4).Compute(1).Column=1
LogicalDisk.Collect.Source(4).Compute(1).String=":"

LogicalDisk.Collect.Source(4).Compute(2).Type="LeftConcat"
LogicalDisk.Collect.Source(4).Compute(2).Column=1
LogicalDisk.Collect.Source(4).Compute(2).String=Column(4)

// Duplicate the "OperationalStatusArray" column
// ElementName,OperationalStatus,OperationalStatus,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(4).Compute(3).Type="DuplicateColumn"
LogicalDisk.Collect.Source(4).Compute(3).Column=2

// Then we translate DMTF's OperationStatus code into OK/WARN/ALARM (for the Status parameter)
// ElementName,PATROLStatusArray,OperationalStatus,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(4).Compute(4).Type="ArrayTranslate"
LogicalDisk.Collect.Source(4).Compute(4).Column=2
LogicalDisk.Collect.Source(4).Compute(4).TranslationTable="DMTFOperationStatusTranslationTable"

// And finally, we translate DMTF's OperationalStatus code into a more readable status string
// ElementName,PATROLStatusArray,StatusInformation,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(4).Compute(5).Type="ArrayTranslate"
LogicalDisk.Collect.Source(4).Compute(5).Column=3
LogicalDisk.Collect.Source(4).Compute(5).TranslationTable="DMTFOperationStatusInformationTranslationTable"
LogicalDisk.Collect.Source(4).Compute(5).ResultSeparator=" - "

// Convert PATROLStatusArray to a simple (unique) PATROLStatus
// ElementName,PATROLStatusArray,StatusInformation,RemainingManagedSpace,SystemID
LogicalDisk.Collect.Source(4).Compute(6).Type="Convert"
LogicalDisk.Collect.Source(4).Compute(6).Column=2
LogicalDisk.Collect.Source(4).Compute(6).ConversionType="Array2SimpleStatus"

// Value Table
// ElementName,PATROLStatusArray,StatusInformation,RemainingManagedSpace,SystemID
LogicalDisk.Collect.ValueTable=%LogicalDisk.Collect.Source(4)%
LogicalDisk.Collect.DeviceID=ValueTable.Column(1)
LogicalDisk.Collect.Status=ValueTable.Column(2)
LogicalDisk.Collect.StatusInformation=ValueTable.Column(3)
LogicalDisk.Collect.UnallocatedSpace=ValueTable.Column(4)

// The DMTFOperationStatusTranslationTable
DMTFOperationStatusTranslationTable(2)="OK"
DMTFOperationStatusTranslationTable(3)="WARN"
DMTFOperationStatusTranslationTable(4)="WARN"
DMTFOperationStatusTranslationTable(5)="WARN"
DMTFOperationStatusTranslationTable(6)="ALARM"
DMTFOperationStatusTranslationTable(7)="ALARM"
DMTFOperationStatusTranslationTable(8)="WARN"
DMTFOperationStatusTranslationTable(9)="WARN"
DMTFOperationStatusTranslationTable(10)="ALARM"
DMTFOperationStatusTranslationTable(11)="WARN"
DMTFOperationStatusTranslationTable(12)="ALARM"
DMTFOperationStatusTranslationTable(13)="ALARM"
DMTFOperationStatusTranslationTable(14)="ALARM"
DMTFOperationStatusTranslationTable(15)="OK"
DMTFOperationStatusTranslationTable(16)="WARN"
DMTFOperationStatusTranslationTable(17)="OK"
DMTFOperationStatusTranslationTable(18)="OK"
DMTFOperationStatusTranslationTable(Default)="UNKNOWN"

// The DMTFOperationStatusInformationTranslationTable
DMTFOperationStatusInformationTranslationTable(2)=""
DMTFOperationStatusInformationTranslationTable(3)="Degraded"
DMTFOperationStatusInformationTranslationTable(4)="Stressed"
DMTFOperationStatusInformationTranslationTable(5)="Predicted Failure"
DMTFOperationStatusInformationTranslationTable(6)="Error"
DMTFOperationStatusInformationTranslationTable(7)="Non-Recoverable Error"
DMTFOperationStatusInformationTranslationTable(8)="Starting"
DMTFOperationStatusInformationTranslationTable(9)="Stopping"
DMTFOperationStatusInformationTranslationTable(10)="Stopped"
DMTFOperationStatusInformationTranslationTable(11)="In Service"
DMTFOperationStatusInformationTranslationTable(12)="No Contact"
DMTFOperationStatusInformationTranslationTable(13)="Lost Communication"
DMTFOperationStatusInformationTranslationTable(14)="Aborted"
DMTFOperationStatusInformationTranslationTable(15)="Dormant"
DMTFOperationStatusInformationTranslationTable(16)="Supporting Entity in Error"
DMTFOperationStatusInformationTranslationTable(17)="Completed"
DMTFOperationStatusInformationTranslationTable(18)="Power Mode"
DMTFOperationStatusInformationTranslationTable(Default)=""
