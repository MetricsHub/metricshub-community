---
- name: discovery
  input: |
    // Source(1) = IPMI source
    Enclosure.Discovery.Source(1).Type="IPMI"
    Enclosure.Discovery.Source(1).ForceSerialization=1

    // Source(2) = IPMI source
    Enclosure.Discovery.Source(2).Type="IPMI"
    Enclosure.Discovery.Source(2).ForceSerialization=1

  expected:
    monitors:
      enclosure:
        discovery:
          sources:
            source(1):
              _comment: Source(1) = IPMI source
              type: ipmi
              forceSerialization: true
            source(2):
              _comment: Source(2) = IPMI source
              type: ipmi
              forceSerialization: true

- name: collect
  input: |
    // Source(1) = IPMI source
    Enclosure.Collect.Source(1).Type="IPMI"
    Enclosure.Collect.Source(1).ForceSerialization=1

    // Source(2) = IPMI source
    Enclosure.Collect.Source(2).Type="IPMI"
    Enclosure.Collect.Source(2).ForceSerialization=1

  expected:
    monitors:
      enclosure:
        collect:
          sources:
            source(1):
              _comment: Source(1) = IPMI source
              type: ipmi
              forceSerialization: true
            source(2):
              _comment: Source(2) = IPMI source
              type: ipmi
              forceSerialization: true