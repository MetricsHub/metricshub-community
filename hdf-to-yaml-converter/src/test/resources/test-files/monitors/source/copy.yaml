---
- name: discovery
  input: |
    // Source(4) = Copy of (1)
    OtherDevice.Discovery.Source(4)=%OtherDevice.Discovery.Source(1)%

    // Source(5) = Copy of (4)
    OtherDevice.Discovery.Source(5)=%OtherDevice.Discovery.Source(4)%
  expected:
    monitors:
      otherDevice:
        discovery:
          sources:
            source(4):
              _comment: Source(4) = Copy of (1)
              type: copy
              from: $monitors.otherDevice.discovery.sources.source(1)$
            source(5):
              _comment: Source(5) = Copy of (4)
              type: copy
              from: $monitors.otherDevice.discovery.sources.source(4)$
- name: collect
  input: |
    // Source(4) = Copy of (1)
    OtherDevice.Collect.Source(4)=%OtherDevice.Collect.Source(1)%

    // Source(5) = Copy of (4)
    OtherDevice.Collect.Source(5)=%OtherDevice.Collect.Source(4)%
  expected:
    monitors:
      otherDevice:
        collect:
          sources:
            source(4):
              _comment: Source(4) = Copy of (1)
              type: copy
              from: $monitors.otherDevice.collect.sources.source(1)$
            source(5):
              _comment: Source(5) = Copy of (4)
              type: copy
              from: $monitors.otherDevice.collect.sources.source(4)$
- name: discoveryFromCollect
  input: |
    // Source(4) = Copy of (1)
    OtherDevice.Collect.Source(4)=%OtherDevice.Discovery.Source(1)%

    // Source(5) = Copy of (4)
    OtherDevice.Collect.Source(5)=%OtherDevice.Collect.Source(4)%
  expected:
    monitors:
      otherDevice:
        collect:
          sources:
            source(4):
              _comment: Source(4) = Copy of (1)
              type: copy
              from: $monitors.otherDevice.discovery.sources.source(1)$
            source(5):
              _comment: Source(5) = Copy of (4)
              type: copy
              from: $monitors.otherDevice.collect.sources.source(4)$