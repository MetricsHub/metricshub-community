- name: test1
  input: |
    LED.Discovery.InstanceTable=%LED.Discovery.Source(1)%
    LED.Discovery.Instance.DeviceID=InstanceTable.Column(1)
    LED.Discovery.Instance.DisplayID=InstanceTable.Column(1)
    LED.Discovery.Instance.Name="System Attention"
    LED.Discovery.Instance.Color=InstanceTable.Column(2)
    LED.Discovery.Instance.OnStatus=InstanceTable.Column(3)
    LED.Discovery.Instance.BlinkingStatus=InstanceTable.Column(4)
    LED.Discovery.Instance.OffStatus=InstanceTable.Column(5)
    LED.Discovery.Instance.AlarmOnColor=InstanceTable.Column(6)
    LED.Discovery.Instance.WarningOnColor=InstanceTable.Column(7)
    LED.Discovery.Instance.AdditionalInformation1=InstanceTable.Column(8)
    LED.Discovery.Instance.AdditionalInformation2=InstanceTable.Column(9)
    LED.Discovery.Instance.AdditionalInformation3=InstanceTable.Column(10)
    LED.Discovery.Instance.AttachedToDeviceType="Enclosure"
  expected:
    monitors:
      led:
        discovery:
          mapping:
            source: ${source::monitors.led.discovery.sources.source(1)}
            attributes:
              id: $1
              __display_id: $1
              color: $2
              __on_status: $3
              __blinking_status: $4
              __off_status: $5
              __name: System Attention
              info: ${awk::join(" ", $8, $9, $10)}
              hw.parent.type: enclosure
              name: ${awk::sprintf("%s (%s - %s)", $1, $2, "System Attention")}