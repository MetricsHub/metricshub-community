- name: test1
  input: |
    // InstanceTable = Source(1)
    PowerSupply.Discovery.InstanceTable=%PowerSupply.Discovery.Source(1)%
    PowerSupply.Discovery.Instance.DeviceID=InstanceTable.Column(1)
    PowerSupply.Discovery.Instance.PowerSupplyType=InstanceTable.Column(2)
    PowerSupply.Discovery.Instance.DisplayID=InstanceTable.Column(3)
    PowerSupply.Discovery.Instance.AttachedToDeviceType="Computer"
    PowerSupply.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(4)
    PowerSupply.Discovery.Instance.PowerSupplyPower=InstanceTable.Column(5)
    PowerSupply.Discovery.Instance.AdditionalInformation3=InstanceTable.Column(6)
    PowerSupply.Discovery.Instance.AdditionalInformation1=InstanceTable.Column(7)
    PowerSupply.Discovery.Instance.AdditionalInformation2=InstanceTable.Column(8)
  expected:
    monitors:
      power_supply:
        discovery:
          mapping:
            _comment: |-
              InstanceTable = Source(1)
            source: $monitors.power_supply.discovery.sources.source(1)$
            attributes:
              id: $column(1)
              power_supply_type: $column(2)
              __display_id: $column(3)
              hw.parent.type: enclosure
              hw.parent.id: $column(4)
              info: join($column(7), $column(8), $column(6), " ")
              name: sprintf("%s (%s - %s)", $column(3), $column(2), $column(5))
            metrics:
              hw.power_supply.limit: $column(5)
