- name: test1
  input: |    
    // InstanceTable = Source(1)
    TapeDrive.Discovery.InstanceTable=%TapeDrive.Discovery.Source(1)%
    TapeDrive.Discovery.Instance.DeviceID=InstanceTable.Column(1)
    TapeDrive.Discovery.Instance.DisplayID=InstanceTable.Column(1)
    TapeDrive.Discovery.Instance.Model=InstanceTable.Column(3)
    TapeDrive.Discovery.Instance.Vendor=InstanceTable.Column(4)
    TapeDrive.Discovery.Instance.SerialNumber=InstanceTable.Column(5)
    TapeDrive.Discovery.Instance.AdditionalInformation1=InstanceTable.Column(2)
    TapeDrive.Discovery.Instance.AdditionalInformation2=InstanceTable.Column(7)
    TapeDrive.Discovery.Instance.AdditionalInformation3=InstanceTable.Column(6)
    TapeDrive.Discovery.Instance.AttachedToDeviceID="STKStreamLine"
    TapeDrive.Discovery.Instance.AttachedToDeviceType="Computer"
    TapeDrive.Discovery.Instance.ControllerNumber=1
    TapeDrive.Discovery.Instance.ErrorCountWarningThreshold="test1"
    TapeDrive.Discovery.Instance.ErrorCountAlarmThreshold="test2"
  expected:
    monitors:
      tape_drive:
        discovery:
          mapping:
            _comment: InstanceTable = Source(1)
            source: $monitors.tape_drive.discovery.sources.source(1)$
            attributes:
              id: $column(1)
              __display_id: $column(1)
              model: $column(3)
              vendor: $column(4)
              serial_number: $column(5)
              info: join($column(2), $column(7), $column(6), " ")
              hw.parent.id: lookup("disk_controller", "id", "controller_number", "1")
              hw.parent.type: disk_controller
              name: sprintf("%s (%s %s)", $column(1), $column(4), $column(3))
            metrics:
              hw.errors.limit{hw.type="tape_drive", limit_type="degraded"}: test1
              hw.errors.limit{hw.type="tape_drive", limit_type="critical"}: test2