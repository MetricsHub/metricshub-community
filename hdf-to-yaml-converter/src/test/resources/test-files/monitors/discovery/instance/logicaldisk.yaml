- name: test1
  input: |
    // Instance Table
    // DeviceID,DisplayID,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
    LogicalDisk.Discovery.InstanceTable=%LogicalDisk.Discovery.Source(8)%
    LogicalDisk.Discovery.Instance.DeviceID=InstanceTable.Column(1)
    LogicalDisk.Discovery.Instance.DisplayID=InstanceTable.Column(2)
    LogicalDisk.Discovery.Instance.Size=InstanceTable.Column(3)
    LogicalDisk.Discovery.Instance.RaidLevel=InstanceTable.Column(8)
    LogicalDisk.Discovery.Instance.UseForCapacityReport=InstanceTable.Column(5)
    LogicalDisk.Discovery.Instance.LogicalDiskType=InstanceTable.Column(6)
    LogicalDisk.Discovery.Instance.AttachedToDeviceID=InstanceTable.Column(7)
    LogicalDisk.Discovery.Instance.AttachedToDeviceType="Enclosure"
    // LogicalDisk.Discovery.Instance.AdditionalInformation2=InstanceTable.Column(13)
  expected:
    monitors:
      logical_disk:
        discovery:
          mapping:
            _comment: |-
              Instance Table
              DeviceID,DisplayID,SizeBytes,RemainingManagedSpace,IncludeInCapacityReport,Type,SystemID,RaidLevel
            source: $monitors.logical_disk.discovery.sources.source(8)$
            attributes:
              id: $column(1)
              __display_id: $column(2)
              type: $column(6)
              hw.parent.id: $column(7)
              hw.parent.type: "enclosure"
              raid_level: $column(8)
              name: sprintf("%s (%s - %s)", $column(2), $column(8), bytes2HumanFormatBase2($column(3)))
              __use_for_capacity_report: $column(5)
            metrics:
              hw.logical_disk.limit: $column(3)