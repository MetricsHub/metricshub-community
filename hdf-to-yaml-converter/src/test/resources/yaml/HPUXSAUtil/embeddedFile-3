BEGIN {
    controller = "";
    size = "";
    mode = "";
}

$1 ~ /Device/ && $2 ~ /File/ {controller=$NF;gsub(/\057dev\057ciss/,"",controller);}


/SCSI DEVICE SUMMARY/,/(SCSI BUS)|(LOGICAL DRIVE)/ {if (NF > 5) {
             if ($(NF-1) ~ /[GgTtMm][Bb]/ && $(NF-5) ~ /[0-9]+/ && $(NF-4) ~ /[0-9]+/) {
                                                   size=$(NF-2) ;
                                                   if ($NF-1 ~ /[Mm][Bb]/) {size=size/1024}
                                                         else if ($NF-1 ~ /[Tt][Bb]/) {size=size*1024} ;
                                                     ID = ("C" controller "-CH"$(NF-5) "-ID" $(NF-4));
                                                     location = ("Controller-ciss" controller " Channel-" $(NF-5) " ID-"$(NF-4));
                                                     if (NF > 6) {location = (location " (" $(NF-6)")")};
                                                     {print "MSHW;"controller";"location";"ID";"size";"$NF";"}
                                                                                       }
                                              }
                                 }

/SATA DEVICE SUMMARY/,/SATA ENCLOSURE SUMMARY/    {if (NF > 8) {
             if ($(NF-1)||$(NF-2)  ~ /[GgTtMm][Bb]/ && $3 ~ /[0-9]+/ && $4 ~ /[0-9]+/) {
                                                   size=$(NF-2) ;
                                                   if ($NF-1 ~ /[Mm][Bb]/) {size=size/1024}
                                                         else if ($NF-1 ~ /[Tt][Bb]/) {size=size*1024} ;
                                                     ID = ("C" controller "-Ct"$2 "-E"$3"-B"$4);
                                                     location = ("Controller-ciss" controller " Ct-" $2 " Enc-" $3 " Bay-" $4 );
                                                     print "MSHW;"controller";"location";"ID";"size";"$NF";"
                                                 }
                                              }
                                 }