BEGIN {
    controllerID="" ; deviceID="" ; name="" ; raidLevel=""; size="";status="";statusInformation="";
}

$1 ~ /^[Aa]dapter$/ && $2 ~ /[0-9]+/ {controllerID = ("#"$2)}

$1 ~ /^[Vv]irtual/ && $2 ~ /^[Dd]isk/ {deviceID = (controllerID "-VD" $3)}

$1 ~ /^[Nn]ame:/ {colonIndex = index($1, ":") ;
                    name = substr($1, colonIndex + 1) ;
                   }

tolower($1) ~ /raid/ && $2 ~ /^[Ll]evel/ && $3 ~ /^Primary-/ {raidLevel=$3 ; gsub (/Primary-/,"",raidLevel);gsub (/,/,"",raidLevel);
                                                               if (raidLevel=="1" && $4 ~ /Secondary-3/) {raidLevel=10}
                                                               }

$1 ~ /^[Ss]ize:/ && $2 ~ /[TtGgMm][Bb]/{colonIndex = index($1, ":") ;
                                          size = substr($1, colonIndex + 1) ;
                                          if ($2 ~ /[Mm][Bb]/) {size = size / 1024};
                                        if ($2 ~ /[Tt][Bb]/) {size = size * 1024};
                                         }

$1 ~ /^[Ss]tate:/ && controllerID != "" && deviceID != "" {status = $2;
                     colonIndex = index($0, ":") ;
                     statusInformation = substr($0, colonIndex + 1) ;
                     print ("MSHW;"controllerID";" deviceID ";" name ";" raidLevel ";" size";"status";"statusInformation";");
                     controllerID="" ; deviceID="" ; name="" ; raidLevel=""; size="";status="";statusInformation="";
                    }