BEGIN {
    controllerID = "";
}
/^MSHW_Controller / {
    controllerID = $2
}
/^PhysDisk [0-9]/ {
    if (controllerID != "")
    {
        diskID = $2
        getline
        if ($0 ~ /PhysDisk State:/)
        {
            colonIndex = index($0, ":")
            status = substr($0, colonIndex + 3, length - colonIndex - 2)
            commaIndex = index(status, ",")
            if (commaIndex > 1)
            {
                status = substr(status, 1, commaIndex - 1)
            }
        }
        getline
        if ($0 ~ /PhysDisk Size/)
        {
            diskSize = $3
            sizeUnit = $4
            if (sizeUnit == "MB,") { diskSize = diskSize * 1048576 }
            else if (sizeUnit == "GB,") { diskSize = diskSize * 1048576 * 1024 }
            else if (sizeUnit == "TB,") { diskSize = diskSize * 1048576 * 1048576 }
            colonIndex = index($0, ":")
            if (colonIndex > 10)
            {
                tempDiskModel = substr($0, colonIndex + 2, length - colonIndex - 1)
                n = split(tempDiskModel, diskModelArray, " ")
                diskModel = ""
                for (i=1 ; i<n ; i++)
                {
                    diskModel = diskModel diskModelArray[i] " "
                }
                diskModel = diskModel diskModelArray[n]
            }
            print "MSHW;" controllerID ";"  diskID ";" diskModel ";" diskSize ";" status
            status = ""
            diskModel = ""
            diskSize = ""
        }
    }
}